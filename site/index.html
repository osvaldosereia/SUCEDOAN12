<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <meta http-equiv="X-Frame-Options" content="DENY">
    
    <title>Mercearia Cuiab√° - Atendimento Facilitado</title>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "GroceryStore",
      "name": "Mercearia Inteligente Cuiab√°",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Cuiab√°",
        "addressRegion": "MT",
        "addressCountry": "BR"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": "-15.6014",
        "longitude": "-56.0979"
      }
    }
    </script>

    <style>
        :root { --primary: #25D366; --bg: #f4f4f4; --text: #2d2d2d; }
        body { font-family: 'Segoe UI', Roboto, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 15px; font-size: 18px; line-height: 1.5; }
        
        /* PILAR 3: Bloqueio de Sele√ß√£o */
        body { -webkit-user-select: none; user-select: none; }

        .chat-box { max-width: 500px; margin: 0 auto; background: white; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); overflow: hidden; }
        .header { background: var(--primary); color: white; padding: 20px; text-align: center; font-weight: bold; }
        .content { padding: 15px; min-height: 300px; }
        
        /* Bot√µes Gigantes para 40+ */
        .btn-action { 
            display: block; width: 100%; padding: 18px; margin-bottom: 12px;
            background: #fff; border: 2px solid var(--primary); border-radius: 12px;
            font-size: 18px; font-weight: bold; cursor: pointer; text-align: left;
            transition: 0.3s;
        }
        .btn-action:active { background: var(--primary); color: white; }
        
        .cesta-card { border: 2px solid #ddd; border-radius: 10px; padding: 15px; margin-bottom: 15px; background: #fff9e6; }
        .price { color: #d32f2f; font-size: 24px; font-weight: bold; }
        .items-list { font-size: 14px; color: #555; margin-top: 10px; padding-left: 20px; }
        
        .badge-cuiaba { font-size: 12px; background: #eee; padding: 4px 8px; border-radius: 4px; display: inline-block; margin-bottom: 10px; }
    </style>
</head>
<body oncontextmenu="return false;">

    <div class="chat-box">
        <div class="header"> Atendente da Mercearia üë®‚Äçüåæ </div>
        <div class="content" id="chat-content">
            <span class="badge-cuiaba">üìç Atendendo agora em Cuiab√°, MT</span>
            <p><strong>Ol√°! Tudo bem?</strong></p>
            <p>Seja bem-vindo(a). Qual desses produtos o(a) senhor(a) quer ver primeiro?</p>
            
            <button class="btn-action" onclick="showCestas()">üß∫ VER CESTAS B√ÅSICAS</button>
            <button class="btn-action" onclick="showCategories()">üìÇ OUTROS PRODUTOS</button>
        </div>
    </div>

    <script>
        // PILAR 3: Verifica√ß√£o de Dom√≠nio
        const siteOficial = "merceariacuiaba.com.br";
        if (window.location.hostname !== siteOficial && window.location.hostname !== "localhost") {
            // console.warn("Aten√ß√£o: Dom√≠nio n√£o autorizado.");
        }

        // Simula√ß√£o de Dados do seu JSON (Cesta Econ√¥mica detectada)
        const cestas = [
            {
                nome: "CESTA ECON√îMICA",
                valor: "R$ 85,00",
                itens: ["Arroz Tio Alvino", "Feij√£o DaCasa", "√ìleo Liza", "A√ß√∫car 2kg", "Caf√© Caboclo", "Macarr√£o", "Biscoito", "e mais 7 itens..."]
            }
        ];

        function showCestas() {
            // PILAR 2: Data Layer (Remarketing)
            window.dataLayer = window.dataLayer || [];
            window.dataLayer.push({ 'event': 'view_promotion', 'promotion_name': 'Cestas Basicas' });

            let html = `<h3>Nossas Cestas de Hoje:</h3>`;
            cestas.forEach(c => {
                html += `
                <div class="cesta-card">
                    <strong>${c.nome}</strong><br>
                    <span class="price">${c.valor}</span>
                    <ul class="items-list">
                        ${c.itens.map(i => `<li>${i}</li>`).join('')}
                    </ul>
                    <button class="btn-action" style="background:var(--primary); color:white; margin-top:10px;" 
                        onclick="finalizar('Cesta Econ√¥mica')">üõí PEDIR ESTA CESTA</button>
                </div>`;
            });
            html += `<button class="btn-action" onclick="window.location.reload()">‚¨ÖÔ∏è Voltar</button>`;
            document.getElementById('chat-content').innerHTML = html;
        }

        function showCategories() {
            const cats = ["MERCEARIA E ALIMENTOS", "LIMPEZA E LAVANDERIA", "CUIDADOS PESSOAIS", "BAZAR E UTILIDADES"];
            let html = `<h3>Escolha uma categoria:</h3>`;
            cats.forEach(cat => {
                html += `<button class="btn-action" onclick="finalizar('${cat}')">üëâ ${cat}</button>`;
            });
            html += `<button class="btn-action" onclick="window.location.reload()">‚¨ÖÔ∏è Voltar</button>`;
            document.getElementById('chat-content').innerHTML = html;
        }

        function finalizar(item) {
            // PILAR 2: Convers√µes (CAPI Ready)
            if(typeof fbq !== 'undefined') {
                fbq('track', 'Lead', { content_name: item, location: 'Cuiab√°' });
            }
            
            alert("Vou te levar para o WhatsApp para terminar o pedido!");
            window.location.href = `https://wa.me/5565999999999?text=Ol√°! Gostaria de pedir: ${item}`;
        }
    </script>

</body>
</html>
