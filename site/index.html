<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Super Cestas Dona Antônia - O melhor preço da região">
    <meta name="theme-color" content="#ffffff">
    <title>Super Cestas Dona Antônia</title>
    <style>
        /* --- 1. RESET E OTIMIZAÇÃO (CRÍTICO PARA PERFORMANCE) --- */
        :root {
            --primary: #ea1d2c; /* Cor estilo iFood */
            --dark: #3e3e3e;
            --gray: #717171;
            --light: #f2f2f2;
            --white: #ffffff;
            --green: #2ecc71;
            --font: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            --shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; outline: none; }
        
        body {
            font-family: var(--font);
            background: var(--light);
            color: var(--dark);
            height: 100dvh; /* Altura total do mobile moderna */
            width: 100vw;
            overflow: hidden; /* O site não rola, só o conteúdo interno */
            display: grid;
            grid-template-rows: auto auto 1fr auto; /* Header | Nav+Search | Carousel | Footer */
        }

        /* --- 2. HEADER (Top Bar) --- */
        .header {
            background: var(--white);
            padding: 10px 16px;
            display: flex; align-items: center; justify-content: space-between;
            box-shadow: 0 1px 0 rgba(0,0,0,0.05);
            z-index: 10;
        }
        .brand { display: flex; align-items: center; gap: 10px; }
        .logo { width: 40px; height: 40px; border-radius: 50%; background: var(--primary); object-fit: cover; }
        .brand-txt { font-size: 0.9rem; font-weight: 700; line-height: 1.2; }
        .btn-faq { background: none; border: 1px solid #ddd; border-radius: 50%; width: 32px; height: 32px; font-weight: bold; color: var(--gray); cursor: pointer; }

        /* --- 3. NAVEGAÇÃO E BUSCA (Acima do carrossel) --- */
        .nav-area {
            background: var(--white);
            padding: 10px 0;
            display: flex; flex-direction: column; gap: 10px;
        }
        
        /* Menu Horizontal (Categorias) */
        .cat-scroll {
            display: flex; gap: 15px; overflow-x: auto; padding: 0 16px;
            scrollbar-width: none; /* Firefox */
        }
        .cat-scroll::-webkit-scrollbar { display: none; }
        
        .cat-btn {
            display: flex; flex-direction: column; align-items: center; gap: 5px;
            background: none; border: none; opacity: 0.6; transition: 0.2s; cursor: pointer;
        }
        .cat-btn.active { opacity: 1; transform: scale(1.05); }
        .cat-btn.active .cat-img { border-color: var(--primary); }
        .cat-btn.active .cat-name { color: var(--primary); font-weight: 700; }
        
        .cat-img { width: 50px; height: 50px; border-radius: 50%; background: #eee; object-fit: cover; border: 2px solid transparent; }
        .cat-name { font-size: 0.75rem; color: var(--dark); font-weight: 500; white-space: nowrap; }

        /* Busca */
        .search-box { padding: 0 16px; position: relative; }
        .search-input {
            width: 100%; padding: 10px 15px 10px 35px;
            background: #f7f7f7; border: none; border-radius: 8px;
            font-size: 0.9rem; color: var(--dark);
        }
        .search-icon { position: absolute; left: 26px; top: 50%; transform: translateY(-50%); width: 14px; opacity: 0.5; }

        /* --- 4. ÁREA PRINCIPAL (CARROSSEL) --- */
        .main-stage {
            overflow-y: auto; /* Rolagem vertical se necessário */
            overflow-x: hidden;
            background: var(--light);
            padding: 15px 0;
            display: flex; flex-direction: column;
        }
        
        .section-title { padding: 0 16px 10px; font-size: 1rem; font-weight: 800; color: var(--dark); }

        /* Carrossel iFood Style */
        .carousel {
            display: flex; gap: 12px; overflow-x: auto; padding: 0 16px 40px; /* Padding bottom extra p/ sombra */
            scroll-behavior: smooth;
        }
        .carousel::-webkit-scrollbar { display: none; }

        /* Cards de Produto */
        .card {
            flex: 0 0 140px; /* Largura fixa */
            background: var(--white);
            border-radius: 12px;
            padding: 10px;
            box-shadow: var(--shadow);
            display: flex; flex-direction: column;
            position: relative;
        }
        .card-img { width: 100%; aspect-ratio: 1/1; object-fit: cover; border-radius: 8px; margin-bottom: 8px; background: #eee; }
        .card-validity { font-size: 0.65rem; color: #888; margin-bottom: 4px; display: block; }
        .card-title { 
            font-size: 0.85rem; font-weight: 600; line-height: 1.3; color: var(--dark);
            display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; /* Max 3 linhas */
            margin-bottom: auto; /* Empurra preço p/ baixo */
            height: 3.9em; /* Altura fixa para alinhar */
        }
        .card-price { font-size: 0.95rem; font-weight: 800; color: var(--green); margin: 8px 0; }
        
        /* Botões de Controle (+ / -) */
        .ctrl-box { 
            display: flex; align-items: center; justify-content: space-between; 
            background: #fff; border: 1px solid #eee; border-radius: 20px; height: 32px; overflow: hidden;
        }
        .btn-act { width: 30px; height: 100%; border: none; background: #fff; font-size: 1.2rem; color: var(--primary); font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .qtd-display { font-size: 0.9rem; font-weight: 600; }
        .btn-add-start { width: 100%; height: 32px; border: none; background: var(--white); border: 1px solid #ddd; color: var(--gray); border-radius: 8px; font-size: 0.8rem; font-weight: bold; cursor: pointer; }
        
        /* --- 5. BARRA INFERIOR (Footer) --- */
        .footer-bar {
            background: var(--white);
            padding: 12px 16px;
            border-top: 1px solid #eee;
            display: flex; align-items: center; justify-content: space-between; gap: 15px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            z-index: 20;
        }
        .total-box { display: flex; flex-direction: column; }
        .total-lbl { font-size: 0.7rem; color: #888; text-transform: uppercase; }
        .total-val { font-size: 1.1rem; font-weight: 800; color: var(--dark); }
        
        .btn-cart {
            background: var(--primary); color: white; border: none;
            padding: 0 24px; height: 44px; border-radius: 8px;
            font-weight: 700; font-size: 0.9rem;
            flex-grow: 1; max-width: 200px;
        }

        /* --- 6. MODAL (Cesta e Checkout) --- */
        dialog {
            border: none; border-radius: 16px; padding: 0;
            width: 90%; max-width: 400px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            margin: auto;
        }
        dialog::backdrop { background: rgba(0,0,0,0.6); backdrop-filter: blur(2px); }
        
        .modal-header { padding: 15px; border-bottom: 1px solid #eee; font-weight: bold; display: flex; justify-content: space-between; align-items: center; }
        .btn-close { background: none; border: none; font-size: 1.5rem; line-height: 1; cursor: pointer; padding: 5px; }
        
        .modal-body { padding: 20px 15px; max-height: 60vh; overflow-y: auto; }
        
        /* Carrossel dentro do Modal */
        .cart-carousel { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 10px; margin-bottom: 20px; }
        .cart-item { min-width: 80px; text-align: center; font-size: 0.8rem; }
        .cart-img { width: 60px; height: 60px; border-radius: 8px; background: #eee; object-fit: cover; margin-bottom: 5px; }

        .form-group { margin-bottom: 15px; }
        .form-input { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; }
        
        .btn-send { width: 100%; background: var(--green); color: white; padding: 14px; border: none; border-radius: 8px; font-weight: bold; font-size: 1rem; cursor: pointer; margin-bottom: 10px; }
        .btn-outline { width: 100%; background: white; color: var(--gray); border: 1px solid #ddd; padding: 12px; border-radius: 8px; font-weight: bold; cursor: pointer; }

        /* Estados utilitários */
        .hidden { display: none !important; }
    </style>
</head>
<body>

    <header class="header">
        <div class="brand">
            <svg class="logo" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <circle cx="50" cy="50" r="50" fill="#ea1d2c"/>
                <text x="50" y="65" font-size="40" text-anchor="middle" fill="white" font-weight="bold">D</text>
            </svg>
            <div class="brand-txt">Super Cestas<br>Dona Antônia</div>
        </div>
        <button class="btn-faq" onclick="APP.toggleFaq()">?</button>
    </header>

    <div class="nav-area">
        <div class="search-box">
            <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="2">
                <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
            <input type="text" class="search-input" placeholder="Buscar item..." oninput="APP.search(this.value)">
        </div>
        
        <div class="cat-scroll" id="cat-list">
            </div>
    </div>

    <main class="main-stage">
        <div class="section-title" id="page-title">Destaques</div>
        <div class="carousel" id="prod-list">
            </div>
    </main>

    <footer class="footer-bar">
        <div class="total-box">
            <span class="total-lbl">Total do Pedido</span>
            <span class="total-val" id="total-val">R$ 0,00</span>
        </div>
        <button class="btn-cart" onclick="APP.openCheckout()">VER CESTA</button>
    </footer>

    <dialog id="modal-checkout">
        <div class="modal-header">
            <span>Sua Cesta</span>
            <button class="btn-close" onclick="APP.closeModal()">×</button>
        </div>
        <div class="modal-body">
            <div id="cart-preview" class="cart-carousel"></div>
            <div id="cart-msg" style="text-align: center; color: #888; margin-bottom: 20px;">Cesta vazia</div>

            <div class="form-group">
                <input type="text" id="client-name" class="form-input" placeholder="Seu Nome Completo">
            </div>
            <div class="form-group">
                <input type="tel" id="client-phone" class="form-input" placeholder="Seu Telefone / WhatsApp">
            </div>

            <button class="btn-send" onclick="APP.sendOrder()">ENVIAR PEDIDO</button>
            <button class="btn-outline" onclick="APP.closeModal()">Continuar Comprando</button>
        </div>
    </dialog>

    <dialog id="modal-faq">
        <div class="modal-header">
            <span>Informações</span>
            <button class="btn-close" onclick="document.getElementById('modal-faq').close()">×</button>
        </div>
        <div class="modal-body">
            <p><strong>Entregas:</strong> Cuiabá e Várzea Grande.</p>
            <p style="margin-top:10px"><strong>Pagamento:</strong> Aceitamos PIX, Dinheiro e Cartão na entrega.</p>
        </div>
    </dialog>

<script>
/* DADOS SIMULADOS (MOCK) 
   Para usar dados reais, substitua isso por um fetch() no APP.init()
*/
const DATA = [
    { id: 1, nome: "Cesta Básica Econômica", preco: 150.00, cat: "Cestas", img: "https://via.placeholder.com/150/FFC107/000?text=Cesta+1", validade: "10/12/2026" },
    { id: 2, nome: "Cesta Básica Família", preco: 280.00, cat: "Cestas", img: "https://via.placeholder.com/150/FFC107/000?text=Cesta+2", validade: "15/12/2026" },
    { id: 3, nome: "Arroz Tio João 5kg", preco: 28.90, cat: "Alimentos", img: "https://via.placeholder.com/150/eee/333?text=Arroz", validade: "20/08/2026" },
    { id: 4, nome: "Feijão Carioca 1kg", preco: 8.50, cat: "Alimentos", img: "https://via.placeholder.com/150/eee/333?text=Feijao", validade: "01/05/2026" },
    { id: 5, nome: "Óleo de Soja 900ml", preco: 6.99, cat: "Alimentos", img: "https://via.placeholder.com/150/eee/333?text=Oleo", validade: "12/12/2027" },
    { id: 6, nome: "Sabão em Pó 1kg", preco: 12.90, cat: "Limpeza", img: "https://via.placeholder.com/150/eee/333?text=Sabao", validade: "Indeterminada" },
    { id: 7, nome: "Detergente Líquido", preco: 2.50, cat: "Limpeza", img: "https://via.placeholder.com/150/eee/333?text=Detergente", validade: "10/2026" }
];

const APP = {
    cart: {}, // Armazena { id: quantidade }
    activeCat: 'Todas',
    
    init() {
        this.renderCats();
        this.renderProds();
    },

    // --- RENDERIZAÇÃO ---
    renderCats() {
        const cats = ['Todas', ...new Set(DATA.map(p => p.cat))];
        const html = cats.map(c => `
            <button class="cat-btn ${c === this.activeCat ? 'active' : ''}" onclick="APP.setCat('${c}')">
                <img src="https://via.placeholder.com/50?text=${c[0]}" class="cat-img">
                <span class="cat-name">${c}</span>
            </button>
        `).join('');
        document.getElementById('cat-list').innerHTML = html;
    },

    renderProds(filterText = '') {
        const container = document.getElementById('prod-list');
        container.innerHTML = '';

        let list = DATA;
        
        // Filtro por Categoria
        if(this.activeCat !== 'Todas') {
            list = list.filter(p => p.cat === this.activeCat);
        }
        
        // Filtro por Busca
        if(filterText) {
            const term = filterText.toLowerCase();
            list = list.filter(p => p.nome.toLowerCase().includes(term));
            document.getElementById('page-title').innerText = "Resultados da Busca";
        } else {
            document.getElementById('page-title').innerText = this.activeCat === 'Todas' ? 'Destaques' : this.activeCat;
        }

        if(list.length === 0) {
            container.innerHTML = '<div style="padding:20px; text-align:center; color:#999; width:100%">Nenhum item encontrado</div>';
            return;
        }

        container.innerHTML = list.map(p => {
            const qtd = this.cart[p.id] || 0;
            const btnHtml = qtd === 0 
                ? `<button class="btn-add-start" onclick="APP.add(${p.id})">ADICIONAR</button>`
                : `<div class="ctrl-box">
                     <button class="btn-act" onclick="APP.remove(${p.id})">-</button>
                     <span class="qtd-display">${qtd}</span>
                     <button class="btn-act" onclick="APP.add(${p.id})">+</button>
                   </div>`;

            return `
            <div class="card">
                <img src="${p.img}" class="card-img" loading="lazy" alt="${p.nome}">
                <span class="card-validity">Val: ${p.validade}</span>
                <h3 class="card-title">${p.nome}</h3>
                <div class="card-price">${this.fmt(p.preco)}</div>
                <div id="action-${p.id}">${btnHtml}</div>
            </div>`;
        }).join('');
    },

    // --- AÇÕES ---
    setCat(cat) {
        this.activeCat = cat;
        this.renderCats(); // Atualiza destaque do botão
        this.renderProds();
    },

    search(val) {
        this.renderProds(val);
    },

    add(id) {
        if(!this.cart[id]) this.cart[id] = 0;
        this.cart[id]++;
        this.refreshCard(id);
        this.updateTotal();
    },

    remove(id) {
        if(this.cart[id]) {
            this.cart[id]--;
            if(this.cart[id] <= 0) delete this.cart[id];
        }
        this.refreshCard(id);
        this.updateTotal();
    },

    // Atualiza apenas o botão do card específico (Performance)
    refreshCard(id) {
        const el = document.getElementById(`action-${id}`);
        if(!el) return; // Item pode não estar visível na busca atual

        const qtd = this.cart[id] || 0;
        if(qtd === 0) {
            el.innerHTML = `<button class="btn-add-start" onclick="APP.add(${id})">ADICIONAR</button>`;
        } else {
            el.innerHTML = `
                <div class="ctrl-box">
                    <button class="btn-act" onclick="APP.remove(${id})">-</button>
                    <span class="qtd-display">${qtd}</span>
                    <button class="btn-act" onclick="APP.add(${id})">+</button>
                </div>`;
        }
    },

    updateTotal() {
        let total = 0;
        for(let id in this.cart) {
            const p = DATA.find(x => x.id == id);
            if(p) total += p.preco * this.cart[id];
        }
        document.getElementById('total-val').innerText = this.fmt(total);
    },

    // --- CHECKOUT ---
    openCheckout() {
        const modal = document.getElementById('modal-checkout');
        const container = document.getElementById('cart-preview');
        const msg = document.getElementById('cart-msg');
        
        container.innerHTML = '';
        const ids = Object.keys(this.cart);

        if(ids.length === 0) {
            msg.style.display = 'block';
            container.style.display = 'none';
        } else {
            msg.style.display = 'none';
            container.style.display = 'flex';
            container.innerHTML = ids.map(id => {
                const p = DATA.find(x => x.id == id);
                return `
                <div class="cart-item">
                    <img src="${p.img}" class="cart-img">
                    <div>${this.cart[id]}x</div>
                </div>`;
            }).join('');
        }
        modal.showModal();
    },

    closeModal() {
        document.getElementById('modal-checkout').close();
    },

    sendOrder() {
        const name = document.getElementById('client-name').value;
        if(!name || Object.keys(this.cart).length === 0) {
            alert('Por favor, preencha seu nome e adicione itens.');
            return;
        }

        let msg = `*NOVO PEDIDO - ${name}*\n------------------\n`;
        let total = 0;
        for(let id in this.cart) {
            const p = DATA.find(x => x.id == id);
            const sub = p.preco * this.cart[id];
            total += sub;
            msg += `${this.cart[id]}x ${p.nome}\n`;
        }
        msg += `------------------\n*TOTAL: ${this.fmt(total)}*`;

        const phone = "5565996813588"; // Número do seu cliente
        window.open(`https://wa.me/${phone}?text=${encodeURIComponent(msg)}`, '_blank');
    },

    toggleFaq() {
        document.getElementById('modal-faq').showModal();
    },

    fmt(v) { return v.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' }); }
};

APP.init();
</script>
</body>
</html>
