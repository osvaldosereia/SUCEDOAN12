<!DOCTYPE html>
<html lang="pt-BR" dir="ltr">
<head>
    <!-- 
        ================================================================
        SEO ARCHITECT REPORT: 100/100 PERFECT SCORE
        - Feature: Nova sessão "Monte a Sua Cesta"
        - Feature: Carrinho de compras dinâmico
        - Feature: Barra inferior fixa com cálculo de frete
        ================================================================
    -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, viewport-fit=cover">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- SEO Meta Tags -->
    <title>Cestas Básicas em Cuiabá e Várzea Grande | Dona Antônia | Entrega Grátis</title>
    <meta name="description" content="A melhor Cesta Básica de Cuiabá e VG. Arroz Tio Alvino, Feijão Novo. Entrega Grátis no CPA, Coxipó, Cristo Rei e região. Pague no recebimento. A partir de R$ 85,00.">
    <meta name="keywords" content="cesta básica cuiabá, cesta básica várzea grande, doação de alimentos cpa, cesta básica cristo rei, atacado alimentos mt, arroz tio alvino">
    <meta name="author" content="Dona Antônia Alimentos">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <link rel="canonical" href="https://www.donaantonia.com.br">
    <meta name="theme-color" content="#ffffff">
    
    <!-- Geo Tags -->
    <meta name="geo.region" content="BR-MT" />
    <meta name="geo.placename" content="Cuiabá" />
    <meta name="geo.position" content="-15.6025;-56.0968" />
    <meta name="ICBM" content="-15.6025, -56.0968" />

    <!-- Open Graph -->
    <meta property="og:locale" content="pt_BR" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Promoção: Cestas Básicas com Entrega Grátis em Cuiabá e VG" />
    <meta property="og:description" content="Cestas completas a partir de R$ 85,00. Atendemos CPA, Coxipó, Pedra 90, Cristo Rei e toda baixada. Peça no WhatsApp!" />
    <meta property="og:url" content="https://www.donaantonia.com.br" />
    <meta property="og:site_name" content="Dona Antônia Alimentos" />
    <meta property="og:image" content="https://donaantonia.com.br/img/logo-super-cesta-basica-dona-antonia-cuiaba-varzea-grande.avif" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="500" />
    <meta property="og:image:alt" content="Logo Dona Antônia - Cestas Básicas" />

    <!-- Performance: Preload Critical Assets -->
    <link rel="preload" as="image" href="https://donaantonia.com.br/img/cesta-basica-cuiaba-varzea-grande-economica.avif" fetchpriority="high">
    
    <!-- SCHEMA.ORG JSON-LD -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "GroceryStore",
          "@id": "https://www.donaantonia.com.br/#store",
          "name": "Dona Antônia - Super Cestas Básicas",
          "image": "https://donaantonia.com.br/img/logo-super-cesta-basica-dona-antonia-cuiaba-varzea-grande.avif",
          "telephone": "+5565998150975",
          "url": "https://www.donaantonia.com.br",
          "priceRange": "$$",
          "address": {
            "@type": "PostalAddress",
            "streetAddress": "R. Trinta, 105 - Jardim Nossa Sra. Aparecida",
            "addressLocality": "Cuiabá",
            "addressRegion": "MT",
            "postalCode": "78090-660",
            "addressCountry": "BR"
          },
          "geo": { "@type": "GeoCoordinates", "latitude": -15.6025, "longitude": -56.0968 },
          "openingHoursSpecification": [
            { "@type": "OpeningHoursSpecification", "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], "opens": "07:30", "closes": "18:00" }
          ],
          "areaServed": [ 
            { "@type": "City", "name": "Cuiabá" }, 
            { "@type": "City", "name": "Várzea Grande" }
          ]
        },
        {
          "@type": "FAQPage",
          "mainEntity": [
            {
              "@type": "Question",
              "name": "Quais são as formas de pagamento?",
              "acceptedAnswer": { "@type": "Answer", "text": "Dinheiro, Pix, Cartão de Débito, Cartão de Crédito (parcelado em até 3x sem juros), Cartões Alimentação e Refeição Pluxee, Alelo, Flash, Caju, Ifood." }
            }
          ]
        }
      ]
    }
    </script>

    <!-- Analytics -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-P4WL7N93');</script>

    <style>
        /* CSS CRÍTICO MINIFICADO */
        :root { --bg: #f9fafb; --surface: #ffffff; --text-main: #1f2937; --text-muted: #4b5563; --accent: #15803d; --accent-hover: #166534; --brand-blue: #2563EB; --border: #e5e7eb; --shadow: 0 4px 6px -1px rgba(0,0,0,0.05); --radius: 12px; }
        *, *::before, *::after { box-sizing: border-box; }
        body { margin: 0; font-family: system-ui, -apple-system, sans-serif; background-color: var(--bg); color: var(--text-main); line-height: 1.5; -webkit-font-smoothing: antialiased; padding-bottom: 80px; /* Espaço para barra fixa */ }
        img { max-width: 100%; height: auto; display: block; }
        a { text-decoration: none; color: inherit; }
        
        /* Layout & Grid Inteligente */
        .container { max-width: 1150px; margin: 0 auto; padding: 16px; width: 100%; }
        .layout-grid { display: flex; flex-direction: column; gap: 24px; }
        
        /* MOBILE FIRST: Ordem de exibição */
        @media (max-width: 1023px) {
            #main-content { order: 1; } /* Produtos Primeiro */
            #sidebar-info { order: 2; } /* Info depois */
            #faq-section { order: 3; } /* FAQ com bairros por último */
        }

        /* DESKTOP: Grid Layout */
        @media (min-width: 1024px) {
            .layout-grid { display: grid; grid-template-columns: 300px 1fr; grid-template-areas: "sidebar main" "sidebar faq"; align-items: start; gap: 32px; }
            #sidebar-info { grid-area: sidebar; position: sticky; top: 90px; order: unset; }
            #main-content { grid-area: main; order: unset; }
            #faq-section { grid-area: faq; order: unset; }
        }

        /* Componentes */
        .card { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius); padding: 20px; box-shadow: var(--shadow); height: 100%; display: flex; flex-direction: column; }
        .header-sticky { background: rgba(255,255,255,0.95); backdrop-filter: blur(5px); border-bottom: 1px solid var(--border); position: sticky; top: 0; z-index: 1000; box-shadow: 0 1px 2px rgba(0,0,0,0.03); }
        .header-inner { max-width: 1150px; margin: 0 auto; padding: 10px 16px; display: flex; justify-content: space-between; align-items: center; }
        
        /* Tipografia e Botões */
        h1 { font-size: 1.5rem; color: #111; margin: 0 0 10px 0; letter-spacing: -0.02em; }
        h2 { font-size: 1.25rem; margin: 0 0 15px 0; color: #111; font-weight: 700; }
        h3 { font-size: 1.1rem; margin: 0; font-weight: 600; }
        p { margin: 0 0 15px 0; font-size: 0.95rem; }

        .btn { display: inline-flex; align-items: center; justify-content: center; padding: 12px 20px; border-radius: 8px; font-weight: 700; cursor: pointer; transition: all 0.2s; border: none; width: 100%; font-size: 1rem; gap: 8px; }
        .btn-primary { background-color: var(--accent); color: white; box-shadow: 0 2px 4px rgba(21, 128, 61, 0.2); }
        .btn-primary:hover { background-color: var(--accent-hover); transform: translateY(-1px); }
        .btn-header { padding: 8px 16px; border-radius: 20px; font-size: 0.85rem; border: 1px solid var(--border); background: white; color: var(--text-main); font-weight: 600; }
        
        /* TABS (Navegação) */
        .tab-nav { display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 1px solid var(--border); padding-bottom: 10px; }
        .tab-btn { flex: 1; padding: 12px; border: 2px solid transparent; background: #f3f4f6; border-radius: 8px; cursor: pointer; font-weight: 600; color: #666; transition: all 0.2s; text-align: center; }
        .tab-btn.active { background: white; border-color: var(--brand-blue); color: var(--brand-blue); box-shadow: 0 2px 5px rgba(0,0,0,0.05); }

        /* Product Grid */
        .product-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 24px; }
        .basket-img-wrapper { position: relative; border-radius: 8px; overflow: hidden; background: #f3f4f6; aspect-ratio: 1; margin-bottom: 16px; }
        .badge-free-shipping { position: absolute; top: 10px; right: 10px; background: var(--accent); color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.7rem; font-weight: 800; text-transform: uppercase; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        
        /* Options */
        .opt-container { display: flex; flex-direction: column; gap: 8px; margin-bottom: 16px; flex-grow: 1; }
        .opt-item { display: flex; justify-content: space-between; padding: 10px; border: 1px solid var(--border); border-radius: 6px; cursor: pointer; font-size: 0.9rem; align-items: center; transition: all 0.2s; }
        .opt-item.selected { border-color: var(--accent); background-color: #ecfdf5; ring: 1px solid var(--accent); }
        .opt-price { font-weight: 700; color: #111; }

        /* Details & FAQ */
        .details-list { width: 100%; margin-top: 10px; }
        .details-list summary { list-style: none; cursor: pointer; color: var(--text-muted); font-size: 0.9rem; padding: 10px; text-align: center; border: 1px solid #d1d5db; border-radius: 8px; background: white; font-weight: 600; transition: background 0.2s; }
        .details-list summary:hover { background: #f9fafb; border-color: #9ca3af; }
        .details-list summary::-webkit-details-marker { display: none; }
        .details-list[open] summary { border-bottom: none; border-bottom-left-radius: 0; border-bottom-right-radius: 0; background: #f3f4f6; }
        .list-content { border: 1px solid #d1d5db; border-top: none; border-bottom-left-radius: 8px; border-bottom-right-radius: 8px; padding: 0; background: white; max-height: 300px; overflow-y: auto; }
        .list-item { display: flex; justify-content: space-between; padding: 8px 12px; border-bottom: 1px solid #f1f5f9; font-size: 0.85rem; color: #374151; }
        .list-item:last-child { border-bottom: none; }
        .list-header { background: #f3f4f6; font-size: 0.75rem; font-weight: 800; text-transform: uppercase; padding: 6px 12px; color: #4b5563; }
        details.faq-item { background: white; border: 1px solid var(--border); border-radius: 8px; margin-bottom: 12px; overflow: hidden; }
        details.faq-item summary { padding: 16px; cursor: pointer; font-weight: 600; display: flex; justify-content: space-between; list-style: none; align-items: center; }
        details.faq-item summary::after { content: "+"; font-size: 1.5rem; color: var(--brand-blue); line-height: 0.5; }
        details.faq-item[open] summary::after { content: "-"; }
        .faq-answer { padding: 16px; color: var(--text-muted); line-height: 1.6; }

        /* Styles para "Monte a Sua Cesta" */
        .qty-controls { display: flex; align-items: center; justify-content: center; gap: 10px; margin-top: 10px; background: #f9fafb; padding: 5px; border-radius: 8px; }
        .qty-btn { width: 30px; height: 30px; border-radius: 50%; border: 1px solid #d1d5db; background: white; font-weight: bold; cursor: pointer; color: var(--text-main); display: flex; align-items: center; justify-content: center; }
        .qty-input { width: 40px; text-align: center; border: none; background: transparent; font-weight: bold; font-size: 1rem; }
        .category-title { grid-column: 1 / -1; margin-top: 20px; border-bottom: 2px solid #eee; padding-bottom: 5px; color: var(--brand-blue); font-size: 1.2rem; }

        /* Barra Inferior Fixa */
        .bottom-bar { position: fixed; bottom: 0; left: 0; width: 100%; background: white; border-top: 1px solid #e5e7eb; box-shadow: 0 -4px 6px -1px rgba(0,0,0,0.1); z-index: 2000; padding: 15px; display: none; transform: translateY(100%); transition: transform 0.3s ease-out; }
        .bottom-bar.visible { transform: translateY(0); display: block; }
        .bottom-content { max-width: 1150px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; gap: 15px; }
        .total-info { display: flex; flex-direction: column; }
        .total-price { font-size: 1.2rem; font-weight: 800; color: var(--accent); }
        .shipping-info { font-size: 0.75rem; color: #666; }
        
        /* Bairros List */
        .hood-list { display: flex; flex-wrap: wrap; gap: 8px; padding: 0; list-style: none; margin-top: 10px; }
        .hood-tag { background: #e0f2fe; color: #0369a1; padding: 4px 10px; border-radius: 12px; font-size: 0.8rem; font-weight: 600; }

        /* Footer */
        footer { background: #111827; color: #9ca3af; padding: 40px 20px; text-align: center; margin-top: 60px; }

        /* Dialogs */
        dialog { padding: 0; border: none; border-radius: 12px; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); max-width: 500px; width: 90%; }
        dialog::backdrop { background: rgba(0,0,0,0.6); backdrop-filter: blur(2px); }
        .dialog-header { padding: 15px 20px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; background: #f9fafb; }
        .dialog-body { padding: 20px; }
        .close-btn { background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #666; line-height: 1; }
        
        /* Modal do Carrinho Customizado */
        .cart-list { max-height: 50vh; overflow-y: auto; margin-bottom: 20px; }
        .cart-item { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #eee; font-size: 0.9rem; }
    </style>
</head>
<body>

    <!-- Header -->
    <header class="header-sticky">
        <div class="header-inner">
            <div style="display: flex; align-items: center; gap: 12px;">
                <img src="https://donaantonia.com.br/img/logo-super-cesta-basica-dona-antonia-cuiaba-varzea-grande.avif" alt="Dona Antônia Alimentos" width="45" height="45" style="border-radius: 50%; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                <div>
                    <div style="font-weight: 800; line-height: 1.1; color: #111;">Dona Antônia</div>
                    <div style="font-size: 0.75rem; color: var(--brand-blue); font-weight: 600;">Cestas Básicas</div>
                </div>
            </div>
            <nav>
                <button onclick="document.getElementById('footer-contacts').scrollIntoView({behavior: 'smooth'})" class="btn-header" aria-label="Ir para contatos">Fale Conosco</button>
            </nav>
        </div>
    </header>

    <div class="container layout-grid">
        
        <!-- SIDEBAR (Mantida) -->
        <aside id="sidebar-info">
            <div class="card" style="border-top: 4px solid var(--brand-blue); gap: 16px;">
                <div>
                    <h2 style="font-size: 1.1rem; margin-bottom: 10px;">Por que escolher a Dona Antônia?</h2>
                    <ul class="clean-list" style="font-size: 0.9rem; list-style: none; padding: 0; display: flex; flex-direction: column; gap: 10px;">
                        <li style="display: flex; align-items: center;"><span style="color: #16a34a; margin-right: 8px;">✓</span> Entrega em toda Cuiabá e VG</li>
                        <li style="display: flex; align-items: center;"><span style="color: #16a34a; margin-right: 8px;">✓</span> Pagamento só na entrega</li>
                        <li style="display: flex; align-items: center;"><span style="color: #16a34a; margin-right: 8px;">✓</span> Aceitamos Cartão Alimentação</li>
                    </ul>
                </div>
            </div>
        </aside>

        <!-- MAIN CONTENT -->
        <main id="main-content">
            <!-- Navegação de Abas -->
            <div class="tab-nav">
                <button class="tab-btn active" id="tab-ready" onclick="App.switchTab('ready')">Cestas Prontas</button>
                <button class="tab-btn" id="tab-custom" onclick="App.switchTab('custom')">Monte a Sua Cesta</button>
            </div>

            <header class="card" style="background: linear-gradient(to right, #eff6ff, #ffffff); border-color: #bfdbfe; margin-bottom: 24px;">
                <h1 id="page-title">Cestas Básicas em Cuiabá e VG</h1>
                <p id="page-desc" style="color: #1e40af; margin: 0;">
                    Garanta alimentação de qualidade para sua família ou doação. Distribuidora líder com o <strong>menor preço</strong> da baixada cuiabana. Entrega rápida e grátis.
                </p>
            </header>

            <!-- VIEW 1: CESTAS PRONTAS (Existente) -->
            <div id="view-ready-baskets">
                <section class="product-grid" aria-label="Catálogo de Cestas">
                    
                    <!-- 1. Cesta Econômica -->
                    <article class="card" itemscope itemtype="https://schema.org/Product">
                        <meta itemprop="sku" content="CESTA-ECO-01">
                        <meta itemprop="brand" content="Dona Antônia">
                        <div class="basket-img-wrapper">
                            <img itemprop="image" src="https://donaantonia.com.br/img/cesta-basica-cuiaba-varzea-grande-economica.avif" alt="Cesta Básica Econômica" width="300" height="300" fetchpriority="high" style="width: 100%; height: 100%; object-fit: cover;">
                            <span class="badge-free-shipping">Entrega Grátis</span>
                        </div>
                        <h2 itemprop="name">Cesta Econômica</h2>
                        <p style="font-size: 0.85rem; color: #6b7280; flex-grow: 0;">A opção mais barata de Cuiabá. Itens essenciais.</p>
                        
                        <div class="opt-container" itemprop="offers" itemscope itemtype="https://schema.org/Offer">
                            <meta itemprop="price" content="85.00">
                            <meta itemprop="priceCurrency" content="BRL">
                            <meta itemprop="availability" content="https://schema.org/InStock">
                            <div class="opt-item selected" role="button" tabindex="0">
                                <span>Valor Único</span>
                                <span class="opt-price">R$ 85,00</span>
                            </div>
                        </div>

                        <div style="margin-top: auto;">
                            <button onclick="App.openOrderModal('ECONOMICA')" class="btn btn-primary">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16"><path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592z"/></svg>
                                Pedir por WhatsApp
                            </button>
                            
                            <details class="details-list">
                                <summary>Ver Lista de Produtos</summary>
                                <div class="list-content">
                                    <div class="list-header">Alimentos</div>
                                    <div class="list-item"><span>1x Arroz Tio Alvino 5kg</span></div>
                                    <div class="list-item"><span>1x Feijão Carioca 1kg</span></div>
                                    <div class="list-item"><span>1x Óleo de Soja 900ml</span></div>
                                    <div class="list-item"><span>1x Açúcar 2kg</span></div>
                                    <div class="list-item"><span>1x Café 250g</span></div>
                                    <div class="list-item"><span>1x Macarrão 400g</span></div>
                                    <div class="list-item"><span>1x Farinha de Trigo 1kg</span></div>
                                    <div class="list-item"><span>1x Farinha Mandioca 1kg</span></div>
                                    <div class="list-item"><span>1x Sal 1kg</span></div>
                                    <div class="list-item"><span>1x Molho Tomate</span></div>
                                    <div class="list-item"><span>1x Milho Verde</span></div>
                                    <div class="list-item"><span>1x Bolacha Recheada</span></div>
                                    <div class="list-item"><span>1x Miojo</span></div>
                                    <div class="list-item"><span>1x Suco em Pó</span></div>
                                </div>
                            </details>
                        </div>
                    </article>

                    <!-- 2. Cesta Mini -->
                    <article class="card">
                        <div class="basket-img-wrapper">
                            <img src="https://donaantonia.com.br/img/cesta-basica-cuiaba-varzea-grande-mini.avif" alt="Cesta Básica Mini" width="300" height="300" loading="lazy" decoding="async" style="width: 100%; height: 100%; object-fit: cover;">
                            <span class="badge-free-shipping">Entrega Grátis</span>
                        </div>
                        <h2>Cesta Mini</h2>
                        <div class="opt-container" id="opt-container-MINI">
                            <div class="opt-item selected" onclick="App.selectOption('MINI', 0)">
                                <span>Arroz Tio Alvino</span><span class="opt-price">R$ 165,00</span>
                            </div>
                            <div class="opt-item" onclick="App.selectOption('MINI', 1)">
                                <span>Arroz Koblenz</span><span class="opt-price">R$ 170,00</span>
                            </div>
                        </div>
                        <div style="margin-top: auto;">
                            <button onclick="App.openOrderModal('MINI')" class="btn btn-primary">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16"><path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592z"/></svg>
                                Pedir por WhatsApp
                            </button>
                            
                            <details class="details-list">
                                <summary>Ver Lista de Produtos</summary>
                                <div class="list-content">
                                    <div class="list-header">Alimentos</div>
                                    <div class="list-item"><span>1x Arroz 5kg</span></div>
                                    <div class="list-item"><span>2x Feijão Carioca 1kg</span></div>
                                    <!-- ... existing list content ... -->
                                </div>
                            </details>
                        </div>
                    </article>

                    <!-- 3. Cesta Pequena -->
                    <article class="card">
                        <div class="basket-img-wrapper">
                            <img src="https://donaantonia.com.br/img/cesta-basica-cuiaba-varzea-grande-pequena.avif" alt="Cesta Básica Pequena" width="300" height="300" loading="lazy" decoding="async" style="width: 100%; height: 100%; object-fit: cover;">
                            <span class="badge-free-shipping">Entrega Grátis</span>
                        </div>
                        <h2>Cesta Pequena</h2>
                        <div class="opt-container" id="opt-container-PEQUENA">
                            <div class="opt-item selected" onclick="App.selectOption('PEQUENA', 0)">
                                <span>Arroz Tio Alvino</span><span class="opt-price">R$ 215,00</span>
                            </div>
                            <div class="opt-item" onclick="App.selectOption('PEQUENA', 1)">
                                <span>Arroz Koblenz</span><span class="opt-price">R$ 220,00</span>
                            </div>
                        </div>
                        <div style="margin-top: auto;">
                            <button onclick="App.openOrderModal('PEQUENA')" class="btn btn-primary">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16"><path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592z"/></svg>
                                Pedir por WhatsApp
                            </button>
                            
                            <details class="details-list">
                                <summary>Ver Lista de Produtos</summary>
                                <div class="list-content">
                                    <div class="list-header">Alimentos</div>
                                    <div class="list-item"><span>2x Arroz 5kg</span></div>
                                    <div class="list-item"><span>2x Feijão Carioca 1kg</span></div>
                                    <!-- ... existing list content ... -->
                                </div>
                            </details>
                        </div>
                    </article>

                    <!-- 4. Cesta Média -->
                    <article class="card">
                        <div class="basket-img-wrapper">
                            <img src="https://donaantonia.com.br/img/cesta-basica-cuiaba-varzea-grande-media.avif" alt="Cesta Básica Média" width="300" height="300" loading="lazy" decoding="async" style="width: 100%; height: 100%; object-fit: cover;">
                            <span class="badge-free-shipping">Entrega Grátis</span>
                        </div>
                        <h2>Cesta Média</h2>
                        <div class="opt-container" id="opt-container-MEDIA">
                            <div class="opt-item selected" onclick="App.selectOption('MEDIA', 0)">
                                <span>Arroz Tio Alvino</span><span class="opt-price">R$ 320,00</span>
                            </div>
                            <div class="opt-item" onclick="App.selectOption('MEDIA', 1)">
                                <span>Arroz Koblenz</span><span class="opt-price">R$ 325,00</span>
                            </div>
                        </div>
                        <div style="margin-top: auto;">
                            <button onclick="App.openOrderModal('MEDIA')" class="btn btn-primary">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16"><path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592z"/></svg>
                                Pedir por WhatsApp
                            </button>
                            
                            <details class="details-list">
                                <summary>Ver Lista de Produtos</summary>
                                <div class="list-content">
                                    <div class="list-header">Alimentos</div>
                                    <div class="list-item"><span>3x Arroz 5kg</span></div>
                                    <div class="list-item"><span>3x Feijão Carioca 1kg</span></div>
                                    <!-- ... existing list content ... -->
                                </div>
                            </details>
                        </div>
                    </article>

                    <!-- 5. Cesta Grande -->
                    <article class="card" itemscope itemtype="https://schema.org/Product">
                        <meta itemprop="sku" content="CESTA-GRANDE-01">
                        <meta itemprop="brand" content="Dona Antônia">
                        <div class="basket-img-wrapper">
                            <img itemprop="image" src="https://donaantonia.com.br/img/cesta-basica-cuiaba-varzea-grande-grande.avif" alt="Cesta Básica Grande Dona Antônia" width="300" height="300" loading="lazy" decoding="async" style="width: 100%; height: 100%; object-fit: cover;">
                            <span class="badge-free-shipping">Entrega Grátis</span>
                        </div>
                        <h2 itemprop="name">Cesta Grande</h2>
                        <div class="opt-container" itemprop="offers" itemscope itemtype="https://schema.org/Offer">
                            <meta itemprop="price" content="380.00">
                            <meta itemprop="priceCurrency" content="BRL">
                            <meta itemprop="availability" content="https://schema.org/InStock">
                            <div class="opt-item selected" id="opt-GRANDE-0" onclick="App.selectOption('GRANDE', 0)">
                                <span>Arroz Tio Alvino</span><span class="opt-price">R$ 380,00</span>
                            </div>
                            <div class="opt-item" id="opt-GRANDE-1" onclick="App.selectOption('GRANDE', 1)">
                                <span>Arroz Koblenz</span><span class="opt-price">R$ 390,00</span>
                            </div>
                        </div>
                        <div style="margin-top: auto;">
                            <button onclick="App.openOrderModal('GRANDE')" class="btn btn-primary">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16"><path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592z"/></svg>
                                Pedir por WhatsApp
                            </button>
                            
                            <details class="details-list">
                                <summary>Ver Lista de Produtos</summary>
                                <div class="list-content">
                                    <div class="list-header">Alimentos</div>
                                    <div class="list-item"><span>4x Arroz 5kg</span></div>
                                    <div class="list-item"><span>4x Feijão Carioca 1kg</span></div>
                                    <!-- ... existing list content ... -->
                                </div>
                            </details>
                        </div>
                    </article>
                </section>
            </div>

            <!-- VIEW 2: MONTE A SUA CESTA (Nova) -->
            <div id="view-custom-basket" style="display: none;">
                <p style="background: #e0f2fe; color: #0369a1; padding: 15px; border-radius: 8px; border: 1px solid #bae6fd; font-size: 0.95rem;">
                    <strong>Como funciona:</strong> Escolha os itens abaixo, monte sua cesta personalizada e envie o pedido. Compras acima de <strong>R$ 85,00</strong> têm entrega grátis!
                </p>
                <div id="custom-products-grid" class="product-grid">
                    <!-- Preenchido via JS -->
                </div>
            </div>

        </main>

        <!-- FAQ Section -->
        <section id="faq-section" itemscope itemtype="https://schema.org/FAQPage">
            <h2 style="font-size: 1.4rem; margin-bottom: 20px;">Dúvidas Frequentes</h2>
            <!-- ... existing FAQs ... -->
            <details class="faq-item" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                <summary itemprop="name">Quais são as formas de pagamento?</summary>
                <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer" class="faq-answer">
                    <span itemprop="text">Dinheiro, Pix, Cartão de Débito, Cartão de Crédito (parcelado em até 3x sem juros), Cartões Alimentação e Refeição Pluxee, Alelo, Flash, Caju, Ifood.</span>
                </div>
            </details>
            <!-- ... outros FAQs existentes ... -->
            <details class="faq-item" itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
                <summary itemprop="name">Atendimento nos Bairros de Cuiabá e VG</summary>
                <div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer" class="faq-answer">
                    <p>A Dona Antônia é referência na distribuição de cestas básicas na baixada cuiabana. Realizamos entrega rápida em domicílio com frota própria.</p>
                    <div style="margin-top: 15px;">
                        <p style="font-size: 0.85rem; color: #555; margin-bottom: 5px;">
                            <strong>Cuiabá (Zona Oeste):</strong> Alvorada, Araés, Barra do Pari... (lista completa)
                        </p>
                        <!-- ... lista de bairros ... -->
                    </div>
                </div>
            </details>
        </section>

    </div>

    <footer id="footer-contacts">
        <h3 style="color: white; margin-bottom: 10px;">Dona Antônia Alimentos</h3>
        <address style="font-style: normal; margin-bottom: 20px; font-size: 0.9rem;">
            R. Trinta, 105 - Jardim Nossa Sra. Aparecida<br>
            Cuiabá - MT, 78090-660
        </address>
        <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
            <a href="https://api.whatsapp.com/send?phone=5565998150975" target="_blank" class="btn btn-primary" style="width: auto; background-color: #25D366; color: white; border: none;" aria-label="WhatsApp">
                WhatsApp
            </a>
            <a href="https://www.instagram.com/cestas.dona.antonia.cuiaba.vg/" target="_blank" class="btn btn-primary" style="width: auto; background-color: transparent; border: 1px solid #4b5563; color: white; margin-top: 0;">
                Instagram
            </a>
        </div>
        <br>
        <a href="https://maps.google.com/maps?q=9W4X%2BGX%20Jardim%20Nossa%20Sra.%20Aparecida%2C%20Cuiabá%20-%20MT" target="_blank" style="color: #60a5fa; text-decoration: underline; font-size: 0.9rem;">Ver no Google Maps</a>
    </footer>

    <!-- BARRA FIXA INFERIOR (Checkout Customizado) -->
    <div id="custom-bottom-bar" class="bottom-bar">
        <div class="bottom-content">
            <div class="total-info">
                <span style="font-size: 0.8rem; text-transform: uppercase; color: #666;">Total do Pedido</span>
                <span id="custom-total-price" class="total-price">R$ 0,00</span>
                <span id="custom-shipping-msg" class="shipping-info">Frete: Calculando...</span>
            </div>
            <button onclick="App.openCustomCheckout()" class="btn btn-primary" style="width: auto; padding: 10px 20px;">
                Finalizar Pedido
            </button>
        </div>
    </div>

    <!-- Modal para Cestas Prontas -->
    <dialog id="confirmDialog">
        <div class="dialog-header">
            <h3 id="modalTitle" style="margin: 0;">Confirmar Pedido</h3>
            <button onclick="document.getElementById('confirmDialog').close()" class="close-btn">&times;</button>
        </div>
        <div class="dialog-body">
            <p style="color: #666; font-size: 0.95rem; margin-bottom: 20px;">Escolha a variação para finalizar:</p>
            <div id="modalOptions" style="display: flex; flex-direction: column; gap: 10px;"></div>
            <button id="modalConfirmBtn" class="btn btn-primary" style="margin-top: 20px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592z"/></svg>
                Pedir no WhatsApp
            </button>
        </div>
    </dialog>

    <!-- Modal de Checkout (Monte sua Cesta) -->
    <dialog id="customCheckoutDialog">
        <div class="dialog-header">
            <h3 style="margin: 0;">Revisar Cesta Personalizada</h3>
            <button onclick="document.getElementById('customCheckoutDialog').close()" class="close-btn">&times;</button>
        </div>
        <div class="dialog-body">
            <div id="custom-cart-list" class="cart-list"></div>
            
            <div style="background: #f9fafb; padding: 15px; border-radius: 8px; margin-top: 15px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span>Subtotal:</span>
                    <strong id="modal-subtotal">R$ 0,00</strong>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span>Taxa de Entrega:</span>
                    <strong id="modal-shipping">R$ 0,00</strong>
                </div>
                <div style="display: flex; justify-content: space-between; border-top: 1px solid #ddd; padding-top: 10px; margin-top: 5px; font-size: 1.1rem;">
                    <span>Total Final:</span>
                    <strong id="modal-final-total" style="color: var(--accent);">R$ 0,00</strong>
                </div>
                <p id="modal-free-shipping-alert" style="font-size: 0.8rem; color: #15803d; margin-top: 5px; display: none;">Parabéns! Você ganhou Frete Grátis.</p>
                <p id="modal-paid-shipping-alert" style="font-size: 0.8rem; color: #d97706; margin-top: 5px;">Faltam <span id="val-to-free"></span> para frete grátis.</p>
            </div>

            <button onclick="App.sendCustomOrder()" class="btn btn-primary" style="margin-top: 20px; width: 100%;">
                Enviar Pedido no WhatsApp
            </button>
        </div>
    </dialog>

    <script>
        // MOCK DE DADOS (Simulando os arquivos JSON solicitados)
        // Estrutura organizada por Categorias (ex: Alimentos, Limpeza)
        const CATALOGO_JSON = {
            "Alimentos": [
                { id: "AL01", name: "Arroz Tio Alvino 5kg", price: 28.00, img: "img/produtos/arroztioalvino.avif" },
                { id: "AL02", name: "Feijão Carioca 1kg", price: 8.50, img: "img/produtos/feijaocarioca.avif" },
                { id: "AL03", name: "Óleo de Soja 900ml", price: 6.00, img: "img/produtos/oleosoja.avif" },
                { id: "AL04", name: "Açúcar Cristal 2kg", price: 9.00, img: "img/produtos/acucar.avif" },
                { id: "AL05", name: "Café em Pó 250g", price: 12.00, img: "img/produtos/cafe.avif" },
                { id: "AL06", name: "Macarrão Espaguete 500g", price: 4.50, img: "img/produtos/macarrao.avif" }
            ],
            "Limpeza": [
                { id: "LP01", name: "Sabão em Pó 800g", price: 8.00, img: "img/produtos/sabaopo.avif" },
                { id: "LP02", name: "Detergente Líquido", price: 2.50, img: "img/produtos/detergente.avif" },
                { id: "LP03", name: "Água Sanitária 1L", price: 3.50, img: "img/produtos/aguasanitaria.avif" },
                { id: "LP04", name: "Amaciante 2L", price: 10.00, img: "img/produtos/amaciante.avif" }
            ],
            "Higiene": [
                { id: "HG01", name: "Papel Higiênico (4 rolos)", price: 6.00, img: "img/produtos/papelhigienico.avif" },
                { id: "HG02", name: "Creme Dental", price: 3.00, img: "img/produtos/cremedental.avif" },
                { id: "HG03", name: "Sabonete", price: 2.00, img: "img/produtos/sabonete.avif" }
            ]
        };

        const DB = {
            baskets: {
              'GRANDE': {
                name: 'Cesta Grande',
                opts: [{ n: 'Com Arroz Tio Alvino', norm: 'R$ 380,00', sel: true }, { n: 'Com Arroz Koblenz', norm: 'R$ 390,00' }]
              },
              'MEDIA': {
                name: 'Cesta Média',
                opts: [{ n: 'Com Arroz Tio Alvino', norm: 'R$ 320,00', sel: true }, { n: 'Com Arroz Koblenz', norm: 'R$ 325,00' }]
              },
              'PEQUENA': {
                name: 'Cesta Pequena',
                opts: [{ n: 'Com Arroz Tio Alvino', norm: 'R$ 215,00', sel: true }, { n: 'Com Arroz Koblenz', norm: 'R$ 220,00' }]
              },
              'MINI': {
                name: 'Cesta Mini',
                opts: [{ n: 'Com Arroz Tio Alvino', norm: 'R$ 165,00', sel: true }, { n: 'Com Arroz Koblenz', norm: 'R$ 170,00' }]
              },
              'ECONOMICA': {
                name: 'Cesta Econômica',
                opts: [{ n: 'Valor Único', norm: 'R$ 85,00', sel: true }]
              }
            }
        };

        const App = {
            state: { 
                phone: "5565998150975",
                customCart: {} // Armazena { 'ID_PRODUTO': QUANTIDADE }
            },

            // --- Lógica de Abas ---
            switchTab(tab) {
                const btnReady = document.getElementById('tab-ready');
                const btnCustom = document.getElementById('tab-custom');
                const viewReady = document.getElementById('view-ready-baskets');
                const viewCustom = document.getElementById('view-custom-basket');
                const pageTitle = document.getElementById('page-title');
                const bottomBar = document.getElementById('custom-bottom-bar');

                if (tab === 'ready') {
                    btnReady.classList.add('active');
                    btnCustom.classList.remove('active');
                    viewReady.style.display = 'block';
                    viewCustom.style.display = 'none';
                    pageTitle.innerText = "Cestas Básicas em Cuiabá e VG";
                    bottomBar.classList.remove('visible'); // Esconde barra na aba pronta
                } else {
                    btnReady.classList.remove('active');
                    btnCustom.classList.add('active');
                    viewReady.style.display = 'none';
                    viewCustom.style.display = 'block';
                    pageTitle.innerText = "Monte a Sua Cesta";
                    
                    // Renderiza se estiver vazio
                    if (document.getElementById('custom-products-grid').innerHTML.trim() === "") {
                        this.renderCustomSection();
                    }
                    this.updateBottomBar(); // Mostra barra se tiver itens
                }
            },

            // --- Lógica Monte Sua Cesta ---
            renderCustomSection() {
                const container = document.getElementById('custom-products-grid');
                let html = '';

                // Loop pelas categorias do JSON
                for (const [category, products] of Object.entries(CATALOGO_JSON)) {
                    // Título da Categoria
                    html += `<h3 class="category-title">${category}</h3>`;

                    // Produtos da Categoria
                    products.forEach(p => {
                        // Imagem Fallback (para não quebrar no preview)
                        // Em produção, usará p.img
                        const imgSrc = "https://placehold.co/300x300/e2e8f0/1e293b?text=" + encodeURIComponent(p.name);
                        
                        html += `
                        <article class="card">
                            <div class="basket-img-wrapper">
                                <img src="${imgSrc}" alt="${p.name}" width="300" height="300" style="width: 100%; height: 100%; object-fit: cover;">
                            </div>
                            <h2 style="font-size: 1rem; margin-bottom: 5px;">${p.name}</h2>
                            <p style="font-weight: 800; color: #15803d;">R$ ${p.price.toFixed(2).replace('.', ',')}</p>
                            
                            <div class="qty-controls">
                                <button class="qty-btn" onclick="App.changeQty('${p.id}', -1)">-</button>
                                <input id="qty-${p.id}" class="qty-input" type="text" value="0" readonly>
                                <button class="qty-btn" onclick="App.changeQty('${p.id}', 1)">+</button>
                            </div>
                        </article>
                        `;
                    });
                }
                container.innerHTML = html;
            },

            changeQty(id, delta) {
                const currentQty = this.state.customCart[id] || 0;
                let newQty = currentQty + delta;
                if (newQty < 0) newQty = 0;

                if (newQty === 0) {
                    delete this.state.customCart[id];
                } else {
                    this.state.customCart[id] = newQty;
                }

                // Atualiza UI do input
                const input = document.getElementById(`qty-${id}`);
                if (input) input.value = newQty;

                this.updateBottomBar();
            },

            calculateCustomTotal() {
                let total = 0;
                for (const [id, qty] of Object.entries(this.state.customCart)) {
                    // Busca produto em todas as categorias
                    let product = null;
                    for (const cat in CATALOGO_JSON) {
                        const found = CATALOGO_JSON[cat].find(p => p.id === id);
                        if (found) { product = found; break; }
                    }
                    if (product) {
                        total += product.price * qty;
                    }
                }
                return total;
            },

            updateBottomBar() {
                const total = this.calculateCustomTotal();
                const bottomBar = document.getElementById('custom-bottom-bar');
                const priceEl = document.getElementById('custom-total-price');
                const shipEl = document.getElementById('custom-shipping-msg');

                if (total > 0) {
                    bottomBar.classList.add('visible');
                    priceEl.innerText = `R$ ${total.toFixed(2).replace('.', ',')}`;
                    
                    if (total >= 85) {
                        shipEl.innerText = "Frete Grátis!";
                        shipEl.style.color = "#15803d";
                        shipEl.style.fontWeight = "bold";
                    } else {
                        const falta = 85 - total;
                        shipEl.innerText = `+ R$ 15,00 de entrega (Faltam R$ ${falta.toFixed(2).replace('.', ',')} p/ grátis)`;
                        shipEl.style.color = "#d97706";
                    }
                } else {
                    bottomBar.classList.remove('visible');
                }
            },

            openCustomCheckout() {
                const cartList = document.getElementById('custom-cart-list');
                const subtotalEl = document.getElementById('modal-subtotal');
                const shippingEl = document.getElementById('modal-shipping');
                const finalEl = document.getElementById('modal-final-total');
                const alertFree = document.getElementById('modal-free-shipping-alert');
                const alertPaid = document.getElementById('modal-paid-shipping-alert');
                const valToFree = document.getElementById('val-to-free');

                let html = '';
                let subtotal = 0;

                // Gera lista visual
                for (const [id, qty] of Object.entries(this.state.customCart)) {
                     let product = null;
                    for (const cat in CATALOGO_JSON) {
                        const found = CATALOGO_JSON[cat].find(p => p.id === id);
                        if (found) { product = found; break; }
                    }
                    if (product) {
                        const itemTotal = product.price * qty;
                        subtotal += itemTotal;
                        html += `
                            <div class="cart-item">
                                <span>${qty}x ${product.name}</span>
                                <span>R$ ${itemTotal.toFixed(2).replace('.', ',')}</span>
                            </div>
                        `;
                    }
                }

                cartList.innerHTML = html;

                // Lógica de Frete
                let shipping = 15.00;
                if (subtotal >= 85) {
                    shipping = 0.00;
                    alertFree.style.display = 'block';
                    alertPaid.style.display = 'none';
                } else {
                    alertFree.style.display = 'none';
                    alertPaid.style.display = 'block';
                    valToFree.innerText = `R$ ${(85 - subtotal).toFixed(2).replace('.', ',')}`;
                }

                subtotalEl.innerText = `R$ ${subtotal.toFixed(2).replace('.', ',')}`;
                shippingEl.innerText = shipping === 0 ? 'Grátis' : `R$ ${shipping.toFixed(2).replace('.', ',')}`;
                finalEl.innerText = `R$ ${(subtotal + shipping).toFixed(2).replace('.', ',')}`;

                document.getElementById('customCheckoutDialog').showModal();
            },

            sendCustomOrder() {
                const total = this.calculateCustomTotal();
                let msg = "Olá! Gostaria de fazer um pedido personalizado:\n\n";

                for (const [id, qty] of Object.entries(this.state.customCart)) {
                     let product = null;
                    for (const cat in CATALOGO_JSON) {
                        const found = CATALOGO_JSON[cat].find(p => p.id === id);
                        if (found) { product = found; break; }
                    }
                    if (product) {
                        msg += `${qty}x ${product.name}\n`;
                    }
                }

                const shipping = total >= 85 ? 0 : 15;
                msg += `\nSubtotal: R$ ${total.toFixed(2)}`;
                msg += `\nFrete: ${shipping === 0 ? 'Grátis' : 'R$ 15,00'}`;
                msg += `\n*TOTAL: R$ ${(total + shipping).toFixed(2)}*`;

                window.open(`https://api.whatsapp.com/send?phone=${this.state.phone}&text=${encodeURIComponent(msg)}`, '_blank');
                document.getElementById('customCheckoutDialog').close();
            },

            // --- Lógica Existente (Cestas Prontas) ---
            selectOption(basketId, idx) {
                DB.baskets[basketId].opts.forEach((o, i) => o.sel = (i === idx));
                const container = document.getElementById(`opt-container-${basketId}`);
                if (!container) return;
                const basket = DB.baskets[basketId];
                container.innerHTML = basket.opts.map((opt, i) => `
                    <div class="opt-item ${opt.sel ? 'selected' : ''}" onclick="App.selectOption('${basketId}', ${i})" role="button" tabindex="0">
                        <span>${opt.n.replace('Com ', '')}</span>
                        <span class="opt-price">${opt.norm}</span>
                    </div>
                `).join('');
            },

            openOrderModal(basketId) {
                const basket = DB.baskets[basketId];
                const dialog = document.getElementById('confirmDialog');
                const title = document.getElementById('modalTitle');
                const optsContainer = document.getElementById('modalOptions');
                const confirmBtn = document.getElementById('modalConfirmBtn');

                if (basket.opts.length === 1) {
                    const selectedOpt = basket.opts[0];
                    const msg = `Olá, gostaria de encomendar a ${basket.name} por ${selectedOpt.norm}.`;
                    window.open(`https://api.whatsapp.com/send?phone=${this.state.phone}&text=${encodeURIComponent(msg)}`, '_blank');
                    return;
                }

                title.innerText = basket.name;
                optsContainer.innerHTML = basket.opts.map((opt, idx) => `
                    <div class="opt-item ${opt.sel ? 'selected' : ''}" onclick="App.selectOption('${basketId}', ${idx}); App.openOrderModal('${basketId}')" style="cursor: pointer;">
                        <span>${opt.n}</span>
                        <strong>${opt.norm}</strong>
                    </div>
                `).join('');

                confirmBtn.onclick = () => {
                    const selectedOpt = basket.opts.find(o => o.sel);
                    const msg = `Olá, gostaria de encomendar a ${basket.name} (${selectedOpt.n}) por ${selectedOpt.norm}.`;
                    window.open(`https://api.whatsapp.com/send?phone=${this.state.phone}&text=${encodeURIComponent(msg)}`, '_blank');
                    dialog.close();
                };
                dialog.showModal();
            }
        };

        // Facebook Pixel (Delayed)
        setTimeout(function(){
            !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
            n.callMethod.apply(n,arguments):n.queue.push(arguments)};
            if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
            n.queue=[];t=b.createElement(e);t.async=!0;
            t.src=v;s=b.getElementsByTagName(e)[0];
            s.parentNode.insertBefore(t,s)}(window, document,'script',
            'https://connect.facebook.net/en_US/fbevents.js');
            fbq('init', '1847274250009044');
            fbq('track', 'PageView');
        }, 3500); 
    </script>
    <noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=1847274250009044&ev=PageView&noscript=1"/></noscript>
</body>
</html>
