<!DOCTYPE html>
<html lang="pt-BR" itemscope itemtype="https://schema.org/LocalBusiness">
<head>
    <!-- 
        ================================================================
        PILLAR 1: CORE WEB VITALS & SEO CONFIG
        ================================================================
    -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cat√°logo de Cestas B√°sicas | Dona Ant√¥nia Cuiab√°</title>
    <meta name="description" content="Confira nosso cat√°logo completo de Cestas B√°sicas: Econ√¥mica, Pequena, M√©dia e Grande. Entrega gr√°tis em Cuiab√° e V√°rzea Grande.">
    <meta name="theme-color" content="#2563EB">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://www.donaantonia.com.br/catalogo">

    <!-- PILLAR 3: SECURITY SUITE -->
    <script>
        (function() {
            const allowedDomains = ['www.donaantonia.com.br', 'donaantonia.com.br', 'localhost', '127.0.0.1'];
            const currentDomain = window.location.hostname;
            const isPreviewEnv = currentDomain.includes('google') || currentDomain.includes('sandbox') || currentDomain.includes('content') || currentDomain.includes('firebaseapp');
            
            if (!isPreviewEnv && !allowedDomains.some(d => currentDomain.endsWith(d))) {
                console.warn(`‚ö†Ô∏è [SECURITY] Dom√≠nio n√£o autorizado.`);
            }
            
            document.addEventListener('contextmenu', event => event.preventDefault());
            document.addEventListener('dragstart', event => event.preventDefault());
        })();
    </script>

    <!-- PILLAR 2: DATA LAYER -->
    <script>
        window.dataLayer = window.dataLayer || [];
        function trackEvent(eventName, params = {}) {
            const eventData = {
                'event': eventName,
                'eventID': 'evt_' + Date.now(),
                'timestamp': new Date().toISOString(),
                ...params
            };
            window.dataLayer.push(eventData);
            if(typeof fbq === 'function') fbq('track', eventName, params, {eventID: eventData.eventID});
            console.log(`üöÄ [TRACKING] ${eventName}`, eventData);
        }
    </script>

    <!-- LIBS -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #2563EB;
            --primary-dark: #1e40af;
            --secondary: #10B981;
            --bg-color: #F8FAFC;
            --text-main: #0F172A;
            --text-sub: #64748B;
            --white: #ffffff;
            --card-shadow: 0 4px 6px -1px rgba(0,0,0,0.05), 0 2px 4px -1px rgba(0,0,0,0.03);
            --header-height: 70px;
            --footer-height: 90px;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            margin: 0; padding: 0; font-family: 'Inter', sans-serif;
            background-color: var(--bg-color); color: var(--text-main);
            padding-bottom: var(--footer-height); /* Space for fixed footer */
        }

        /* HEADER (Top Bar) */
        .catalog-header {
            background: var(--white); padding: 10px 16px;
            display: flex; align-items: center; gap: 12px;
            position: fixed; top: 0; left: 0; right: 0; z-index: 50;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: transform 0.3s ease-in-out;
            height: var(--header-height);
        }
        .catalog-header.hidden { transform: translateY(-100%); }
        
        .brand-logo { width: 40px; height: 40px; border-radius: 50%; border: 2px solid #E2E8F0; object-fit: cover; }
        .brand-name { font-size: 14px; font-weight: 700; color: var(--text-main); line-height: 1.2; }

        /* HERO SECTION */
        .hero-section { padding: 20px 16px; text-align: center; margin-top: var(--header-height); }
        .hero-title { font-size: 22px; font-weight: 800; margin: 0 0 16px 0; color: var(--text-main); letter-spacing: -0.5px; }
        
        .btn-discount {
            background: var(--primary); color: white; border: none;
            width: 100%; max-width: 400px; padding: 14px;
            font-size: 16px; font-weight: 700; border-radius: 12px;
            cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
            transition: transform 0.2s; margin: 0 auto;
        }
        .btn-discount:active { transform: scale(0.98); background: var(--primary-dark); }

        /* CHIPS MENU (Sticky & Styled) */
        .chips-container {
            display: flex; gap: 8px; overflow-x: auto; 
            padding: 12px 16px;
            scrollbar-width: none; justify-content: center;
            
            /* Sticky Logic */
            position: sticky;
            top: var(--header-height); /* Default position under header */
            z-index: 40;
            background: rgba(248, 250, 252, 0.95); /* Semi-transparent bg */
            backdrop-filter: blur(8px);
            border-bottom: 1px solid #E2E8F0;
            transition: top 0.3s ease-in-out; /* Smooth transition for header sync */
        }
        .chips-container::-webkit-scrollbar { display: none; }
        
        .chip {
            padding: 8px 16px; background: var(--white); border: 1px solid #E2E8F0;
            border-radius: 20px; font-size: 12px; font-weight: 700; color: var(--text-sub);
            white-space: nowrap; cursor: pointer; transition: all 0.2s; text-transform: uppercase;
            box-shadow: 0 2px 4px rgba(0,0,0,0.02);
        }
        .chip.active { background: var(--text-main); color: white; border-color: var(--text-main); box-shadow: 0 4px 10px rgba(0,0,0,0.1); }

        /* CATALOG LIST */
        .catalog-list { padding: 20px 16px; display: flex; flex-direction: column; gap: 24px; max-width: 600px; margin: 0 auto; }

        /* CARD STYLES */
        .card-cesta-new {
            background: var(--white); border-radius: 16px; overflow: hidden;
            box-shadow: var(--card-shadow); border: 1px solid #F1F5F9;
            margin-bottom: 20px; animation: fadeInScale 0.4s ease-out;
            scroll-margin-top: 140px; /* Ensures scroll lands nicely below chips */
        }
        @keyframes fadeInScale { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } }

        .card-header-visual { position: relative; background: #f8fafc; padding: 0; }
        
        /* FOTO DA CESTA */
        .card-img-side {
            width: 100%; 
            height: auto; 
            object-fit: cover; 
            display: block; 
            max-height: 450px; 
        }
        
        .card-title-side {
            padding: 16px; background: white; border-bottom: 1px solid #f1f5f9;
            display: flex; justify-content: space-between; align-items: center;
        }
        .card-title-side h2 { margin: 0; font-size: 20px; font-weight: 800; color: var(--text-main); }
        .price-badge { font-size: 18px; font-weight: 700; color: var(--primary); }

        .card-control-row { display: flex; border-bottom: 1px solid #E2E8F0; }
        .btn-card-toggle {
            flex: 1; background: #F8FAFC; border: none; padding: 14px;
            font-size: 14px; font-weight: 600; color: var(--text-sub);
            cursor: pointer; transition: all 0.2s; border-right: 1px solid #E2E8F0;
        }
        .btn-card-toggle:last-child { border-right: none; }
        .btn-card-toggle.active { background: white; color: var(--primary); box-shadow: inset 0 -2px 0 var(--primary); }
        .btn-card-toggle i { margin-right: 6px; }

        .card-expand-section { padding: 16px; display: none; }
        .card-expand-section.active { display: block; }

        /* PRODUCTS GRID */
        .products-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; width: 100%; }
        .mini-product-card {
            background: #fff; border: 1px solid #E2E8F0; border-radius: 8px;
            padding: 8px 4px; text-align: center;
            display: flex; flex-direction: column; align-items: center; justify-content: flex-start;
            height: 210px; gap: 4px;
        }
        .mini-prod-img { width: 100%; height: 120px; object-fit: contain; margin-bottom: 2px; mix-blend-mode: multiply; }
        .mini-prod-badge { background: #EFF6FF; color: var(--primary); font-size: 13px; font-weight: 800; padding: 4px 8px; border-radius: 4px; margin-bottom: 2px; width: 100%; }
        .mini-prod-name { font-size: 11px; color: var(--text-main); font-weight: 600; line-height: 1.2; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }

        /* RADIO SELECTION */
        .arroz-selection-container { display: flex; flex-direction: column; gap: 8px; margin-bottom: 16px; }
        .radio-arroz-option {
            display: flex; justify-content: space-between; align-items: center;
            padding: 14px; border: 2px solid #E2E8F0; border-radius: 12px;
            cursor: pointer; transition: all 0.2s; background: white;
        }
        .radio-arroz-option.selected { border-color: var(--primary); background: #EFF6FF; }
        .radio-arroz-info { display: flex; flex-direction: column; }
        .radio-arroz-name { font-size: 14px; font-weight: 600; color: var(--text-main); }
        .radio-arroz-price { font-size: 16px; font-weight: 700; color: var(--primary); }
        .radio-circle { width: 20px; height: 20px; border-radius: 50%; border: 2px solid #CBD5E1; position: relative; flex-shrink: 0; }
        .radio-arroz-option.selected .radio-circle { border-color: var(--primary); }
        .radio-arroz-option.selected .radio-circle::after {
            content: ''; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 10px; height: 10px; background: var(--primary); border-radius: 50%;
        }

        .btn-encomendar-card {
            background: #10B981; color: white; width: 100%; border: none;
            padding: 16px; border-radius: 12px; font-weight: 700; font-size: 16px;
            cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px;
            box-shadow: 0 4px 10px rgba(16, 185, 129, 0.2); transition: background 0.2s;
        }
        .btn-encomendar-card:active { transform: scale(0.98); background: #059669; }

        /* --- COMPANY BOTTOM BAR (CHIPS STYLE) --- */
        .company-bar {
            position: fixed; bottom: 0; left: 0; right: 0;
            background: white; border-top: 1px solid #E2E8F0;
            padding: 12px 16px; z-index: 100;
            box-shadow: 0 -4px 15px rgba(0,0,0,0.05);
            display: flex; flex-direction: column; align-items: center; gap: 8px;
        }
        .company-bar-title {
            font-size: 11px; font-weight: 700; text-transform: uppercase; color: var(--text-sub); letter-spacing: 0.5px;
        }
        .company-buttons-chips {
            display: flex; gap: 8px; overflow-x: auto; width: 100%;
            scrollbar-width: none; justify-content: center; padding-bottom: 2px;
        }
        .company-buttons-chips::-webkit-scrollbar { display: none; }

        .footer-chip {
            display: flex; align-items: center; gap: 6px;
            padding: 8px 16px;
            background: #F8FAFC; border: 1px solid #E2E8F0;
            border-radius: 20px;
            font-size: 12px; font-weight: 600; color: var(--text-main);
            text-decoration: none; cursor: pointer; white-space: nowrap;
            transition: all 0.2s;
        }
        .footer-chip:active { transform: scale(0.95); opacity: 0.8; }
        .footer-chip i { font-size: 16px; }

        /* Brand Colors for Chips */
        .footer-chip.instagram { color: #E1306C; background: #FFF0F5; border-color: #FFDBE9; }
        .footer-chip.facebook { color: #1877F2; background: #EFF6FF; border-color: #BFDBFE; }
        .footer-chip.whatsapp { color: #25D366; background: #DCFCE7; border-color: #BBF7D0; }

        /* MODAL COMMON */
        .modal-overlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.6); z-index: 2000;
            display: flex; align-items: flex-end;
            opacity: 0; visibility: hidden; transition: all 0.3s;
            backdrop-filter: blur(4px);
        }
        .modal-overlay.center { align-items: center; justify-content: center; }
        .modal-overlay.active { opacity: 1; visibility: visible; }
        
        .modal-sheet {
            background: white; width: 100%; border-radius: 20px 20px 0 0;
            padding: 24px; max-width: 600px; margin: 0 auto;
            transform: translateY(100%); transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
            max-height: 90vh; overflow-y: auto;
        }
        .modal-overlay.active .modal-sheet { transform: translateY(0); }

        .modal-popup {
            background: white; width: 90%; max-width: 340px; border-radius: 16px;
            padding: 0; position: relative; overflow: hidden;
            transform: scale(0.9); transition: transform 0.3s;
        }
        .modal-overlay.active .modal-popup { transform: scale(1); }

        .btn-close-modal {
            position: absolute; top: 16px; right: 16px; background: none; border: none; font-size: 24px; color: #94A3B8; cursor: pointer; z-index: 10;
        }

        /* CONTACT MODAL LIST */
        .contact-list { list-style: none; padding: 0; margin: 20px 0 0 0; }
        .contact-item { 
            display: flex; align-items: center; gap: 12px; padding: 12px; 
            border: 1px solid #E2E8F0; border-radius: 12px; margin-bottom: 10px;
            text-decoration: none; color: var(--text-main); font-weight: 600;
        }
        .contact-item i { font-size: 20px; color: var(--secondary); }

        /* INFO MODAL STYLES (Reused) */
        .modal-header-info { text-align: center; padding: 20px; border-bottom: 1px solid #F1F5F9; }
        .modal-header-info img { width: 60px; height: 60px; border-radius: 50%; border: 3px solid #E2E8F0; }
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; padding: 16px; }
        .stat-box { background: #F8FAFC; padding: 10px; text-align: center; border-radius: 8px; border: 1px solid #E2E8F0; }
        .stat-box strong { display: block; font-size: 14px; color: var(--text-main); }
        .stat-box span { font-size: 10px; color: var(--text-sub); }

        /* FORM STYLES */
        .form-group { margin-bottom: 16px; }
        .form-label { display: block; font-size: 13px; font-weight: 600; margin-bottom: 6px; color: var(--text-sub); }
        .form-input, .form-select {
            width: 100%; padding: 12px; border: 1px solid #CBD5E1; border-radius: 8px;
            font-size: 15px; font-family: 'Inter', sans-serif;
        }
        .form-input:focus, .form-select:focus { outline: none; border-color: var(--primary); }

    </style>
</head>
<body oncontextmenu="return false;">

    <!-- HEADER (Hide on scroll down) -->
    <header id="main-header" class="catalog-header">
        <img src="https://donaantonia.com.br/img/logo-super-cesta-basica-dona-antonia-cuiaba-varzea-grande.avif" 
             class="brand-logo" alt="Logo Dona Antonia"
             onerror="this.src='https://placehold.co/40x40/2563EB/ffffff?text=DA'">
        <div class="brand-name">Super Cestas Dona Ant√¥nia<br>de Cuiab√° e VG</div>
    </header>

    <!-- HERO & CTA -->
    <section class="hero-section">
        <h1 class="hero-title">Conhe√ßa as nossas<br>Cestas B√°sicas</h1>
        <button onclick="openLeadModal('Geral')" class="btn-discount">
            <i class="ph-bold ph-ticket"></i> Garantir meu Desconto
        </button>
    </section>

    <!-- CHIPS NAVIGATION -->
    <nav class="chips-container" id="nav-chips">
        <!-- Rendered via JS -->
    </nav>

    <!-- CATALOG MAIN -->
    <main class="catalog-list" id="catalog-container">
        <!-- Single Active Card Rendered Here -->
    </main>

    <!-- COMPANY BOTTOM BAR (CHIPS) -->
    <footer class="company-bar">
        <div class="company-bar-title">Conhe√ßa a nossa Empresa</div>
        <div class="company-buttons-chips">
            <a href="https://www.instagram.com/cestas.dona.antonia.cuiaba.vg/" target="_blank" class="footer-chip instagram">
                <i class="ph-logo-instagram"></i> Instagram
            </a>
            <a href="https://facebook.com/cestas.dona.antonia" target="_blank" class="footer-chip facebook">
                <i class="ph-logo-facebook"></i> Facebook
            </a>
            <button onclick="openModal('infoModal')" class="footer-chip">
                <i class="ph-storefront"></i> Sobre
            </button>
            <button onclick="openModal('contactModal')" class="footer-chip whatsapp">
                <i class="ph-whatsapp-logo"></i> Contato
            </button>
        </div>
    </footer>

    <!-- LEAD MODAL -->
    <div id="leadModal" class="modal-overlay" onclick="if(event.target === this) closeModal('leadModal')">
        <div class="modal-sheet">
            <button class="btn-close-modal" onclick="closeModal('leadModal')"><i class="ph-bold ph-x"></i></button>
            <h2 style="margin: 0 0 8px 0; font-size: 20px; font-weight: 700;">Garantir Desconto üéâ</h2>
            <p style="margin: 0 0 20px 0; font-size: 14px; color: var(--text-sub);">Preencha para receber o cupom no WhatsApp.</p>
            <div class="form-group"><label class="form-label">Seu Nome</label><input type="text" id="inputName" class="form-input" placeholder="Ex: Maria da Silva"></div>
            <div class="form-group"><label class="form-label">Cidade</label><select id="inputCity" class="form-select"><option value="Cuiab√°">Cuiab√°</option><option value="V√°rzea Grande">V√°rzea Grande</option></select></div>
            <div class="form-group"><label class="form-label">Bairro</label><input type="text" id="inputBairro" class="form-input" placeholder="Ex: Pedra 90"></div>
            <input type="hidden" id="inputContext" value="">
            <button onclick="submitLead()" class="btn-discount" style="width: 100%;">Enviar para WhatsApp <i class="ph-bold ph-whatsapp-logo"></i></button>
        </div>
    </div>

    <!-- INFO MODAL (Sobre) -->
    <div id="infoModal" class="modal-overlay center" onclick="if(event.target === this) closeModal('infoModal')">
        <div class="modal-popup">
            <button class="btn-close-modal" onclick="closeModal('infoModal')"><i class="ph-bold ph-x"></i></button>
            <div class="modal-header-info">
                <img src="https://donaantonia.com.br/img/logo-super-cesta-basica-dona-antonia-cuiaba-varzea-grande.avif" onerror="this.src='https://placehold.co/60x60'">
                <h3 style="margin: 8px 0 0 0; font-size: 18px;">Dona Ant√¥nia</h3>
                <p style="margin:0; font-size: 12px; color: #64748B;">CNPJ: 51.385.335.0001-06</p>
            </div>
            <div class="stats-grid">
                <div class="stat-box"><strong>+30 Mil</strong><span>Entregas</span></div>
                <div class="stat-box"><strong>8 Anos</strong><span>Mercado</span></div>
                <div class="stat-box"><strong>+6k</strong><span>Facebook</span></div>
                <div class="stat-box"><strong>+2k</strong><span>Instagram</span></div>
            </div>
            <div style="padding: 0 16px 16px 16px; text-align: center;">
                <p style="font-size: 13px; color: #334155; line-height: 1.5;">
                    Tradi√ß√£o e qualidade em cestas b√°sicas. Entregamos em toda Cuiab√° e V√°rzea Grande com pagamento na hora.
                </p>
                <div style="background: #ECFDF5; color: #065F46; padding: 8px; border-radius: 8px; font-size: 12px; font-weight: 700; margin-top: 10px;">
                    <i class="ph-money"></i> Pague s√≥ na entrega
                </div>
            </div>
        </div>
    </div>

    <!-- CONTACT MODAL -->
    <div id="contactModal" class="modal-overlay center" onclick="if(event.target === this) closeModal('contactModal')">
        <div class="modal-popup" style="padding: 24px;">
            <button class="btn-close-modal" onclick="closeModal('contactModal')"><i class="ph-bold ph-x"></i></button>
            <h3 style="margin: 0 0 4px 0;">Fale Conosco</h3>
            <p style="margin: 0; font-size: 13px; color: #64748B;">Clique para ligar ou chamar no Zap</p>
            
            <ul class="contact-list">
                <li>
                    <a href="tel:65996813588" class="contact-item">
                        <i class="ph-phone"></i> (65) 99681-3588
                    </a>
                </li>
                <li>
                    <a href="https://wa.me/5565998150975" class="contact-item">
                        <i class="ph-whatsapp-logo"></i> (65) 99815-0975
                    </a>
                </li>
            </ul>
            <div style="text-align: center; margin-top: 16px;">
                <p style="font-size: 12px; color: #94A3B8;">Atendimento: Seg a S√°b das 08h √†s 12h</p>
            </div>
        </div>
    </div>

    <script>
        // --- DATABASE ---
        const BASKETS = {
            'ECONOMICA': {
                name: 'Cesta Econ√¥mica',
                img: 'https://donaantonia.com.br/img/cesta-basica-cuiaba-varzea-grande-economica.avif',
                priceDisplay: 'R$ 85,00',
                options: [{ label: 'Valor √önico', price: 'R$ 85,00', value: '85,00', selected: true }],
                items: [
                    { qtd: '1x', name: 'Arroz 5kg' }, { qtd: '1x', name: 'A√ß√∫car 2kg' }, { qtd: '1x', name: '√ìleo 900ml' },
                    { qtd: '1x', name: 'Feij√£o 1kg' }, { qtd: '1x', name: 'Caf√© 250g' }, { qtd: '1x', name: 'Espaguete 400g' },
                    { qtd: '1x', name: 'Trigo 1kg' }, { qtd: '1x', name: 'Farinha Mandioca 1kg' }, { qtd: '1x', name: 'Sal 1kg' },
                    { qtd: '1x', name: 'Molho Tomate' }, { qtd: '1x', name: 'Milho Lata' }, { qtd: '1x', name: 'Bolacha Recheada' },
                    { qtd: '1x', name: 'Miojo' }, { qtd: '1x', name: 'Suco P√≥' }
                ]
            },
            'MINI': {
                name: 'Cesta Mini',
                img: 'https://donaantonia.com.br/img/cesta-basica-cuiaba-varzea-grande-mini.avif',
                priceDisplay: 'A partir de R$ 165,00',
                options: [
                    { label: 'Com Arroz Tio Alvino', price: 'R$ 165,00', value: '165,00', selected: true },
                    { label: 'Com Arroz Koblenz', price: 'R$ 170,00', value: '170,00' }
                ],
                items: [
                    { qtd: '1x', name: 'Arroz 5kg' }, { qtd: '1x', name: 'A√ß√∫car 2kg' }, { qtd: '2x', name: '√ìleo 900ml' },
                    { qtd: '2x', name: 'Feij√£o 1kg' }, { qtd: '1x', name: 'Caf√© 250g' }, { qtd: '1x', name: 'Espaguete 500g' },
                    { qtd: '1x', name: 'Sal 1kg' }, { qtd: '1x', name: 'Molho Tomate' }, { qtd: '1x', name: 'Milho Lata' },
                    { qtd: '1x', name: 'Bolacha Recheada' }, { qtd: '1x', name: 'Miojo' }, { qtd: '2x', name: 'Suco P√≥' },
                    { qtd: '1x', name: 'Sab√£o Barra' }, { qtd: '1x', name: 'Creme Dental' }, { qtd: '1x', name: 'Papel Higi√™nico' },
                    { qtd: '1x', name: 'Amaciante 2L' }, { qtd: '1x', name: 'Desinfetante 2L' }, { qtd: '1x', name: 'Sab√£o P√≥ OMO' },
                    { qtd: '1x', name: 'Detergente' }, { qtd: '1x', name: 'Qboa 1L' }, { qtd: '2x', name: 'Sabonete' },
                    { qtd: '1x', name: 'Esponja A√ßo' }, { qtd: '1x', name: 'Esponja Lou√ßa' }
                ]
            },
            'PEQUENA': {
                name: 'Cesta Pequena',
                img: 'https://donaantonia.com.br/img/cesta-basica-cuiaba-varzea-grande-pequena.avif',
                priceDisplay: 'A partir de R$ 215,00',
                options: [
                    { label: 'Com Arroz Tio Alvino', price: 'R$ 215,00', value: '215,00', selected: true },
                    { label: 'Com Arroz Koblenz', price: 'R$ 220,00', value: '220,00' }
                ],
                items: [
                    { qtd: '2x', name: 'Arroz 5kg' }, { qtd: '1x', name: 'A√ß√∫car 2kg' }, { qtd: '2x', name: '√ìleo 900ml' },
                    { qtd: '2x', name: 'Feij√£o 1kg' }, { qtd: '1x', name: 'Caf√© 250g' }, { qtd: '1x', name: '12 Ovos' },
                    { qtd: '1x', name: 'Mistura Bolo' }, { qtd: '1x', name: 'Espaguete 500g' }, { qtd: '1x', name: 'Trigo 1kg' },
                    { qtd: '1x', name: 'Sal 1kg' }, { qtd: '1x', name: 'Molho Tomate' }, { qtd: '1x', name: 'Milho Lata' },
                    { qtd: '1x', name: 'Tempero' }, { qtd: '2x', name: 'Bolacha Recheada' }, { qtd: '2x', name: 'Miojo' },
                    { qtd: '2x', name: 'Suco P√≥' }, { qtd: '1x', name: 'Sab√£o Barra' }, { qtd: '1x', name: 'Creme Dental' },
                    { qtd: '1x', name: 'Papel Higi√™nico' }, { qtd: '1x', name: 'Amaciante 2L' }, { qtd: '1x', name: 'Desinfetante 2L' },
                    { qtd: '1x', name: 'Sab√£o P√≥ OMO' }, { qtd: '2x', name: 'Detergente' }, { qtd: '1x', name: 'Qboa 1L' },
                    { qtd: '2x', name: 'Sabonete' }, { qtd: '1x', name: 'Esponja A√ßo' }, { qtd: '1x', name: 'Esponja Lou√ßa' }
                ]
            },
            'MEDIA': {
                name: 'Cesta M√©dia',
                img: 'https://donaantonia.com.br/img/cesta-basica-cuiaba-varzea-grande-media.avif',
                priceDisplay: 'A partir de R$ 320,00',
                options: [
                    { label: 'Com Arroz Tio Alvino', price: 'R$ 320,00', value: '320,00', selected: true },
                    { label: 'Com Arroz Koblenz', price: 'R$ 325,00', value: '325,00' }
                ],
                items: [
                    { qtd: '3x', name: 'Arroz 5kg' }, { qtd: '2x', name: 'A√ß√∫car 2kg' }, { qtd: '3x', name: '√ìleo 900ml' },
                    { qtd: '3x', name: 'Feij√£o 1kg' }, { qtd: '1x', name: 'Caf√© 500g' }, { qtd: '1x', name: '12 Ovos' },
                    { qtd: '1x', name: 'Mistura Bolo' }, { qtd: '2x', name: 'Espaguete 500g' }, { qtd: '1x', name: 'Trigo 1kg' },
                    { qtd: '1x', name: 'Sal 1kg' }, { qtd: '2x', name: 'Molho Tomate' }, { qtd: '1x', name: 'Milho Lata' },
                    { qtd: '1x', name: 'Tempero' }, { qtd: '2x', name: 'Bolacha Recheada' }, { qtd: '2x', name: 'Miojo' },
                    { qtd: '3x', name: 'Suco P√≥' }, { qtd: '1x', name: 'Sab√£o Barra' }, { qtd: '2x', name: 'Creme Dental' },
                    { qtd: '2x', name: 'Papel Higi√™nico' }, { qtd: '1x', name: 'Amaciante 2L' }, { qtd: '1x', name: 'Desinfetante 2L' },
                    { qtd: '1x', name: 'Sab√£o P√≥ OMO' }, { qtd: '2x', name: 'Detergente' }, { qtd: '1x', name: 'Qboa 1L' },
                    { qtd: '3x', name: 'Sabonete' }, { qtd: '1x', name: 'Esponja A√ßo' }, { qtd: '1x', name: 'Esponja Lou√ßa' }
                ]
            },
            'GRANDE': {
                name: 'Cesta Grande',
                img: 'https://donaantonia.com.br/img/cesta-basica-cuiaba-varzea-grande-grande.avif',
                priceDisplay: 'R$ 380,00',
                options: [
                    { label: 'Com Arroz Tio Alvino', price: 'R$ 380,00', value: '380,00', selected: true }
                ],
                items: [
                    { qtd: '4x', name: 'Arroz 5kg' }, { qtd: '3x', name: 'A√ß√∫car 2kg' }, { qtd: '4x', name: '√ìleo 900ml' },
                    { qtd: '4x', name: 'Feij√£o 1kg' }, { qtd: '1x', name: 'Caf√© 500g' }, { qtd: '3x', name: 'Espaguete 500g' },
                    { qtd: '1x', name: '12 Ovos' }, { qtd: '1x', name: 'Mistura Bolo' }, { qtd: '1x', name: 'Trigo 1kg' },
                    { qtd: '1x', name: 'Sal 1kg' }, { qtd: '2x', name: 'Molho Tomate' }, { qtd: '1x', name: 'Milho Lata' },
                    { qtd: '1x', name: 'Tempero' }, { qtd: '2x', name: 'Bolacha Recheada' }, { qtd: '2x', name: 'Miojo' },
                    { qtd: '4x', name: 'Suco P√≥' }, { qtd: '1x', name: 'Sab√£o Barra' }, { qtd: '2x', name: 'Creme Dental' },
                    { qtd: '2x', name: 'Papel Higi√™nico' }, { qtd: '1x', name: 'Amaciante 2L' }, { qtd: '1x', name: 'Desinfetante 2L' },
                    { qtd: '1x', name: 'Sab√£o P√≥ OMO' }, { qtd: '2x', name: 'Detergente' }, { qtd: '1x', name: 'Qboa 1L' },
                    { qtd: '4x', name: 'Sabonete' }, { qtd: '1x', name: 'Esponja A√ßo' }, { qtd: '1x', name: 'Esponja Lou√ßa' }
                ]
            }
        };

        // --- IMAGE MAPPER ---
        function getProductImage(name) {
            const n = name.toLowerCase();
            const foodPath = 'img/alimento/';
            const cleanPath = 'img/limpeza/';
            
            if(n.includes('arroz')) return foodPath + 'Arroz Koblenz 5kg.webp';
            if(n.includes('a√ß√∫car')) return foodPath + 'a√ßucar doce dia 2 kg.webp';
            if(n.includes('bolacha')) return foodPath + 'bolacha mybit.webp';
            if(n.includes('bolo')) return foodPath + 'bolo apti chocolate.webp';
            if(n.includes('caf√©') && n.includes('500g')) return foodPath + 'cafe caboclo 500g.webp';
            if(n.includes('caf√©')) return foodPath + 'cafe caboclo 250g.webp';
            if(n.includes('espaguete')) return foodPath + 'espaguete qdelicia.webp';
            if(n.includes('farinha mandioca')) return foodPath + 'farinha de mandioca.webp';
            if(n.includes('feij√£o')) return foodPath + 'feij√£o da casa.webp';
            if(n.includes('milho')) return foodPath + 'milho verde predileta.webp';
            if(n.includes('miojo')) return foodPath + 'miojo apti.webp';
            if(n.includes('molho')) return foodPath + 'molho fugini.webp';
            if(n.includes('√≥leo')) return foodPath + 'oleo de soja liza.webp';
            if(n.includes('ovo')) return foodPath + 'ovo duzia.jpg';
            if(n.includes('sal')) return foodPath + 'sal.webp';
            if(n.includes('suco')) return foodPath + 'suco frisco.webp';
            if(n.includes('tempero')) return foodPath + 'tempero tio jonas.jpg';
            if(n.includes('trigo')) return foodPath + 'trigo vitoriosa.webp';

            if(n.includes('creme dental')) return cleanPath + 'Creme Dental Sorriso 70g.webp';
            if(n.includes('desinfetante')) return cleanPath + 'Desinfetante Remmus 2L.webp';
            if(n.includes('detergente')) return cleanPath + 'Detergente Ype 500ml.webp';
            if(n.includes('qboa')) return cleanPath + 'Qboa 1 Litro.webp';
            if(n.includes('amaciante')) return cleanPath + 'amaciante ype 2L.webp';
            if(n.includes('esponja lou√ßa')) return cleanPath + 'esponja de lavar lou√ßa.webp';
            if(n.includes('esponja a√ßo')) return cleanPath + 'l√£ de a√ßo assolan.webp';
            if(n.includes('papel')) return cleanPath + 'papel higienico.webp';
            if(n.includes('sabonete')) return cleanPath + 'sabonete palmolive 85g.webp';
            if(n.includes('sab√£o barra')) return cleanPath + 'sab√£o barra ype 900g.webp';
            if(n.includes('sab√£o p√≥') || n.includes('omo')) return cleanPath + 'sab√£o barra ype 900g.webp';

            return `https://placehold.co/100x100/f1f5f9/334155?text=${encodeURIComponent(name.split(' ')[0])}`;
        }

        // --- CORE FUNCTIONS ---
        function renderChips() {
            const nav = document.getElementById('nav-chips');
            nav.innerHTML = Object.keys(BASKETS).map(key => `
                <button class="chip ${key === 'ECONOMICA' ? 'active' : ''}" 
                        onclick="switchBasket('${key}', this)">
                    ${key}
                </button>
            `).join('');
        }

        function renderBasket(key) {
            const container = document.getElementById('catalog-container');
            const data = BASKETS[key];
            
            const itemsHtml = data.items.map(item => {
                const qtyNum = item.qtd.replace('x', '');
                const qtyText = `${qtyNum} ${qtyNum === '1' ? 'unidade' : 'unidades'}`;
                return `
                <div class="mini-product-card">
                    <img src="${getProductImage(item.name)}" class="mini-prod-img" loading="lazy" alt="${item.name}">
                    <div class="mini-prod-badge">${qtyText}</div>
                    <span class="mini-prod-name">${item.name}</span>
                </div>
            `}).join('');

            const optionsHtml = data.options.map(opt => `
                <div class="radio-arroz-option ${opt.selected ? 'selected' : ''}" 
                     onclick="selectOption('${key}', '${opt.value}', '${opt.price}', '${opt.label}', this)">
                    <div class="radio-arroz-info">
                        <span class="radio-arroz-name">${opt.label}</span>
                        <span class="radio-arroz-price">${opt.price}</span>
                    </div>
                    <div class="radio-circle"></div>
                </div>
            `).join('');

            const defaultOpt = data.options.find(o => o.selected) || data.options[0];

            container.innerHTML = `
                <div class="card-cesta-new">
                    <div class="card-header-visual">
                        <img src="${data.img}" class="card-img-side" alt="${data.name}">
                        <div class="card-title-side">
                            <h2>${data.name}</h2>
                            <span class="price-badge">${data.priceDisplay}</span>
                        </div>
                    </div>
                    <div class="card-control-row">
                        <button class="btn-card-toggle active" onclick="toggleTab('produtos')"><i class="fas fa-th-large"></i> Produtos</button>
                        <button class="btn-card-toggle" onclick="toggleTab('valor')"><i class="fas fa-dollar-sign"></i> Valor & Pedido</button>
                    </div>
                    <div id="tab-produtos" class="card-expand-section active">
                        <div class="products-grid">${itemsHtml}</div>
                    </div>
                    <div id="tab-valor" class="card-expand-section">
                        <p style="margin-bottom: 12px; font-size: 13px; color:#64748B;">Selecione uma op√ß√£o:</p>
                        <div class="arroz-selection-container">${optionsHtml}</div>
                        <button id="btn-final-order" class="btn-encomendar-card" 
                                onclick="openLeadModal('${data.name} - ${defaultOpt.label} (${defaultOpt.price})')">
                            <i class="fab fa-whatsapp"></i> Encomendar
                        </button>
                    </div>
                </div>
            `;
        }

        function switchBasket(key, btn) {
            document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
            btn.classList.add('active');
            renderBasket(key);
        }

        function toggleTab(tabName) {
            document.querySelectorAll('.btn-card-toggle').forEach(b => b.classList.remove('active'));
            event.currentTarget.classList.add('active');
            document.getElementById('tab-produtos').style.display = tabName === 'produtos' ? 'grid' : 'none';
            document.getElementById('tab-valor').style.display = tabName === 'valor' ? 'block' : 'none';
        }

        function selectOption(basketKey, value, priceDisplay, label, element) {
            document.querySelectorAll('.radio-arroz-option').forEach(e => e.classList.remove('selected'));
            element.classList.add('selected');
            const btn = document.getElementById('btn-final-order');
            const basketName = BASKETS[basketKey].name;
            btn.onclick = function() {
                openLeadModal(`${basketName} - ${label} (${priceDisplay})`);
            };
        }

        // --- MODALS SYSTEM ---
        function openLeadModal(context) {
            document.getElementById('leadModal').classList.add('active');
            document.getElementById('inputContext').value = context;
            trackEvent('OpenLeadForm', { context: context });
        }

        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
            trackEvent('OpenModal', { id: modalId });
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        function submitLead() {
            const name = document.getElementById('inputName').value.trim();
            const city = document.getElementById('inputCity').value;
            const bairro = document.getElementById('inputBairro').value.trim();
            const interest = document.getElementById('inputContext').value;

            if(!name || !bairro) {
                alert('Preencha seu nome e bairro para continuar.');
                return;
            }

            const text = `Ol√°! Me chamo *${name}*, sou de *${city}* (Bairro: ${bairro}).\nTenho interesse em: *${interest}*.`;
            const phone = "5565998150975";
            const url = `https://api.whatsapp.com/send?phone=${phone}&text=${encodeURIComponent(text)}`;
            
            trackEvent('SubmitLead', { interest: interest });
            window.location.href = url;
            closeModal('leadModal');
        }

        // --- HEADER SCROLL LOGIC ---
        let lastScrollY = window.scrollY;
        window.addEventListener('scroll', () => {
            const header = document.getElementById('main-header');
            const chips = document.getElementById('nav-chips');
            
            if (window.scrollY > lastScrollY && window.scrollY > 50) {
                // Scroll Down -> Hide Header, Sticky Chips at Top
                header.classList.add('hidden');
                chips.style.top = '0px'; 
            } else {
                // Scroll Up -> Show Header, Sticky Chips below Header
                header.classList.remove('hidden');
                chips.style.top = '70px';
            }
            lastScrollY = window.scrollY;
        });

        // INIT
        window.onload = function() {
            renderChips();
            renderBasket('ECONOMICA');
        };

    </script>
</body>
</html>
