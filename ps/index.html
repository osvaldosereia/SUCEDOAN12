<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Participe deste anivers√°rio solid√°rio e doe uma cesta b√°sica.">
    <meta name="theme-color" content="#FF6B6B"> <!-- Cor da barra do navegador mobile -->
    <title>Anivers√°rio Solid√°rio - Preview</title>

    <!-- Fontes (Inter) para tipografia limpa e moderna -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* --- CSS Reset & Vari√°veis --- */
        :root {
            --primary-color: #FF6B6B; 
            --primary-dark: #e55a5a;
            --text-dark: #1A1A1A;
            --text-gray: #666666;
            --text-light: #FFFFFF;
            --bg-light: #F8F9FA;
            --white: #FFFFFF;
            --border-radius: 16px; /* Arredondamento moderno */
            --container-width: 480px; /* Foco total no mobile layout */
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.04);
            --shadow-md: 0 8px 24px rgba(0,0,0,0.08);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body { 
            font-family: 'Inter', sans-serif; 
            color: var(--text-dark); 
            line-height: 1.6; 
            background-color: #f0f2f5; 
            -webkit-font-smoothing: antialiased; 
            padding-bottom: 40px;
        }

        img { max-width: 100%; display: block; }
        a { text-decoration: none; }
        button { font-family: inherit; }

        /* --- Layout Container --- */
        .container { 
            width: 100%; 
            max-width: var(--container-width); 
            margin: 0 auto; 
            padding: 0 20px; 
        }

        /* --- Componentes --- */
        .card { 
            background: var(--white); 
            padding: 24px; 
            border-radius: var(--border-radius); 
            box-shadow: var(--shadow-sm); 
            margin-bottom: 24px; 
            transition: transform 0.2s ease;
        }

        /* --- Header --- */
        .site-header { 
            text-align: center; 
            padding: 24px 0; 
            margin-bottom: 10px;
        }
        .logo-img { 
            height: 32px; 
            margin: 0 auto; 
            display: block;
        }

        /* --- Hero Section --- */
        .hero-section { 
            text-align: center; 
            padding-top: 32px;
            padding-bottom: 32px;
        }
        .host-photo-container { 
            width: 128px; 
            height: 128px; 
            margin: 0 auto 20px; 
            border-radius: 50%; 
            padding: 4px;
            background: #fff;
            box-shadow: var(--shadow-md);
            position: relative;
        }
        .host-photo-ring {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 3px solid var(--primary-color);
            overflow: hidden;
        }
        .host-photo { 
            width: 100%; 
            height: 100%; 
            object-fit: cover; 
        }
        .event-title { 
            font-size: 1.75rem; 
            font-weight: 700; 
            margin-bottom: 8px; 
            letter-spacing: -0.5px;
            color: var(--text-dark);
        }
        .event-subtitle { 
            color: var(--text-gray); 
            font-size: 1.05rem; 
            font-weight: 500;
        }

        /* --- Story Section --- */
        .story-title { font-size: 1.25rem; font-weight: 700; margin-bottom: 16px; display: flex; align-items: center; gap: 8px; }
        .story-title::before { content: ''; display: block; width: 4px; height: 24px; background: var(--primary-color); border-radius: 4px; }
        
        .story-text { 
            color: var(--text-gray); 
            font-size: 0.95rem; 
            margin-bottom: 24px; 
            white-space: pre-line; 
        }

        .beneficiary-card { 
            display: flex; 
            align-items: center; 
            background: var(--bg-light); 
            padding: 16px; 
            border-radius: 12px; 
            border: 1px solid #eee;
        }
        .beneficiary-thumb { 
            width: 56px; 
            height: 56px; 
            border-radius: 50%; 
            object-fit: cover; 
            margin-right: 16px; 
            border: 2px solid #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .beneficiary-info p { 
            font-size: 0.75rem; 
            text-transform: uppercase; 
            letter-spacing: 0.5px; 
            font-weight: 600; 
            color: var(--text-gray); 
            margin-bottom: 4px; 
        }
        .beneficiary-info h4 { 
            font-size: 1rem; 
            font-weight: 600; 
            color: var(--text-dark); 
            line-height: 1.2;
        }

        /* --- Progress Section --- */
        .progress-stats { 
            display: flex; 
            justify-content: space-between; 
            margin-bottom: 10px; 
            font-size: 0.95rem; 
            font-weight: 600; 
        }
        .progress-bar-bg { 
            width: 100%; 
            height: 14px; 
            background: #EBEBEB; 
            border-radius: 10px; 
            overflow: hidden; 
            position: relative;
        }
        .progress-bar-fill { 
            height: 100%; 
            background: linear-gradient(90deg, var(--primary-color), var(--primary-dark)); 
            width: 0%; 
            transition: width 1.5s cubic-bezier(0.22, 1, 0.36, 1); 
            border-radius: 10px;
        }
        .progress-subtext { 
            text-align: center; 
            font-size: 0.85rem; 
            color: var(--text-gray); 
            margin-top: 12px; 
            background: #fff5f5;
            color: var(--primary-dark);
            padding: 8px;
            border-radius: 8px;
            font-weight: 500;
        }

        /* --- Product & Checkout --- */
        .product-card { padding-bottom: 32px; border: 1px solid var(--primary-color); position: relative; overflow: hidden; }
        .product-card::before {
            content: ''; position: absolute; top:0; left:0; width: 100%; height: 6px; background: var(--primary-color);
        }

        .product-img { 
            width: 100%; 
            height: 220px;
            object-fit: cover;
            border-radius: 12px; 
            margin-bottom: 20px; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }
        .product-header { margin-bottom: 16px; text-align: center; }
        .product-title { font-size: 1.35rem; font-weight: 700; margin-bottom: 8px; }
        .product-desc { color: var(--text-gray); font-size: 0.9rem; line-height: 1.5; margin-bottom: 20px; padding: 0 10px; }
        
        .price-tag {
            background: var(--bg-light);
            display: inline-block;
            padding: 8px 24px;
            border-radius: 50px;
            margin-bottom: 24px;
        }
        .product-price { 
            font-size: 1.5rem; 
            font-weight: 700; 
            color: var(--primary-color); 
            letter-spacing: -0.5px;
        }

        /* Checkbox Legal estilizado */
        .legal-checkbox-container { 
            display: flex; 
            align-items: flex-start; 
            text-align: left; 
            margin-bottom: 24px; 
            padding: 16px; 
            background: #f8f9fa; 
            border-radius: 12px; 
            border: 1px solid #eee;
            cursor: pointer;
            transition: background 0.2s;
        }
        .legal-checkbox-container:hover { background: #f0f0f0; }

        /* Escondendo o checkbox padr√£o e criando um customizado */
        .legal-checkbox { 
            position: absolute; opacity: 0; cursor: pointer; height: 0; width: 0;
        }
        .checkmark {
            position: relative;
            height: 22px;
            width: 22px;
            min-width: 22px;
            background-color: #fff;
            border: 2px solid #ccc;
            border-radius: 6px;
            margin-right: 12px;
            margin-top: 2px;
            transition: all 0.2s;
        }
        .legal-checkbox-container:hover input ~ .checkmark { border-color: #999; }
        .legal-checkbox-container input:checked ~ .checkmark {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        .checkmark:after {
            content: "";
            position: absolute;
            display: none;
        }
        .legal-checkbox-container input:checked ~ .checkmark:after {
            display: block;
        }
        .legal-checkbox-container .checkmark:after {
            left: 7px;
            top: 3px;
            width: 5px;
            height: 10px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }

        .legal-label { 
            font-size: 0.85rem; 
            color: var(--text-gray); 
            line-height: 1.4; 
            user-select: none;
            cursor: pointer;
        }
        .legal-label strong { color: var(--text-dark); font-weight: 600; }

        /* Bot√£o */
        .btn-cta { 
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            width: 100%; 
            padding: 18px; 
            background-color: var(--primary-color); 
            color: var(--text-light); 
            font-size: 1.1rem; 
            font-weight: 700; 
            border-radius: 50px; 
            border: none; 
            cursor: pointer; 
            transition: all 0.2s ease; 
            box-shadow: 0 10px 20px -10px var(--primary-color);
            opacity: 0.5;
            pointer-events: none; /* Desabilitado por padr√£o */
        }
        
        /* Estado Habilitado */
        .btn-cta.enabled {
            opacity: 1;
            pointer-events: auto;
        }
        .btn-cta.enabled:hover { 
            background-color: var(--primary-dark); 
            transform: translateY(-2px);
            box-shadow: 0 15px 30px -10px var(--primary-dark);
        }
        .btn-cta:active { transform: scale(0.98); }

        .payment-security { 
            text-align: center; 
            font-size: 0.75rem; 
            color: #999; 
            margin-top: 16px; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            gap: 6px;
        }
        .payment-security svg { fill: #999; width: 12px; }

        /* --- Footer --- */
        .site-footer { 
            text-align: center; 
            padding: 40px 20px; 
            color: #888; 
            font-size: 0.85rem; 
            border-top: 1px solid #eee; 
            background: #fff;
            margin-top: 40px;
        }
        .footer-logo { font-family: 'Inter', sans-serif; font-weight: 700; color: #ccc; letter-spacing: -0.5px; font-size: 1.2rem; margin-bottom: 12px; }

        /* --- Loading --- */
        #loading-overlay { 
            position: fixed; top:0; left:0; width: 100%; height: 100%; 
            background: var(--bg-light); 
            display: flex; justify-content: center; align-items: center; 
            z-index: 999; 
            transition: opacity 0.5s ease;
        }
        .spinner { width: 40px; height: 40px; border: 3px solid #eee; border-top: 3px solid var(--primary-color); border-radius: 50%; animation: spin 0.8s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

    </style>
</head>

<body>

    <div id="loading-overlay">
        <div class="spinner"></div>
    </div>

    <!-- Header / Logo -->
    <header class="site-header container">
        <!-- Logo simulada com texto estilizado para o preview -->
        <div style="font-size: 24px; font-weight: 800; color: #FF6B6B; letter-spacing: -1px;">
            presente<span style="color:#1a1a1a">.social</span><span style="color:#FF6B6B">‚ù§</span>
        </div>
    </header>

    <main class="container">
        <!-- Hero Section -->
        <section class="card hero-section">
            <div class="host-photo-container">
                <div class="host-photo-ring">
                    <img id="host-photo" src="" alt="Aniversariante" class="host-photo">
                </div>
            </div>
            <h1 id="event-title" class="event-title">...</h1>
            <p id="event-subtitle" class="event-subtitle">...</p>
        </section>

        <!-- Story Section -->
        <section class="card story-section">
            <h2 id="story-title" class="story-title">...</h2>
            <p id="story-text" class="story-text">...</p>
            
            <div class="beneficiary-card">
                <img id="beneficiary-thumb" src="" alt="Institui√ß√£o" class="beneficiary-thumb">
                <div class="beneficiary-info">
                    <p>Destino das Doa√ß√µes:</p>
                    <h4 id="beneficiary-name">...</h4>
                </div>
            </div>
        </section>

        <!-- Progress Section -->
        <section class="card progress-section">
            <div class="progress-stats">
                <span><span style="color:#888; font-weight:400;">J√° doadas:</span> <strong id="cestas-current" style="color:var(--primary-color)">0</strong></span>
                <span><span style="color:#888; font-weight:400;">Meta:</span> <strong id="cestas-goal">0</strong></span>
            </div>
            <div class="progress-bar-bg">
                <div id="progress-fill" class="progress-bar-fill"></div>
            </div>
            <p id="progress-subtext" class="progress-subtext">...</p>
        </section>

        <!-- Product & Checkout -->
        <section class="card product-card" id="checkout-section">
            <img id="product-img" src="" alt="Cesta B√°sica" class="product-img">
            
            <div class="product-header">
                <h3 id="product-name" class="product-title">...</h3>
                <div class="price-tag">
                    <span id="product-price" class="product-price">...</span>
                </div>
                <p id="product-desc" class="product-desc">...</p>
            </div>

            <!-- Custom Checkbox -->
            <label class="legal-checkbox-container">
                <input type="checkbox" id="legal-agreement" class="legal-checkbox">
                <span class="checkmark"></span>
                <span class="legal-label">
                    <strong>Concordo com a destina√ß√£o:</strong> Entendo que estou comprando produtos que ser√£o entregues diretamente √† institui√ß√£o, sem recebimento f√≠sico por minha parte.
                </span>
            </label>

            <!-- Bot√£o -->
            <button id="btn-buy" class="btn-cta">
                <span>‚ù§</span> Presentear Cesta
            </button>
            
            <div class="payment-security">
                <svg viewBox="0 0 24 24"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/></svg>
                Ambiente seguro ‚Ä¢ Mercado Pago
            </div>
        </section>
    </main>

    <footer class="site-footer">
        <div class="footer-logo">presente.social</div>
        <div class="container">
            <p style="margin-bottom: 10px;">
                Transpar√™ncia: A presta√ß√£o de contas com fotos da entrega ser√° enviada aos doadores ap√≥s o evento.
            </p>
            <p>
                Operado por <strong>Super Cestas Dona Ant√¥nia</strong><br>
                CNPJ XX.XXX.XXX/0001-XX ‚Ä¢ Cuiab√° - MT
            </p>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            
            // --- DADOS SIMULADOS (Substituindo o fetch para o preview) ---
            // No projeto real, isso viria do arquivo data.json
            const data = {
                "config": {
                    "cor_primaria": "#FF6B6B"
                },
                "evento": {
                    "titulo_pagina": "30 anos da Maria",
                    "foto_aniversariante_url": "https://placehold.co/400x400/FF6B6B/ffffff?text=Maria",
                    "titulo_principal": "30 Anos da Maria",
                    "subtitulo": "O presente √© coletivo. Bem-vindo!",
                    "titulo_historia": "Por que decidi doar?",
                    "texto_historia": "Tenho tudo o que preciso: sa√∫de, amigos e fam√≠lia.\n\nMas sei que muitas fam√≠lias no bairro Santa Isabel precisam do b√°sico. Por isso, minha lista de presentes √© √∫nica: Cestas B√°sicas.\n\nConto com voc√™s para fazermos a diferen√ßa!"
                },
                "beneficiario": {
                    "nome": "Lar dos Idosos S√£o Vicente",
                    "foto_url": "https://placehold.co/100x100/eeeeee/999999?text=Lar"
                },
                "meta": {
                    "cestas_objetivo": 50,
                    "cestas_atuais": 12
                },
                "produto": {
                    "nome": "Cesta Solid√°ria Dona Ant√¥nia",
                    "descricao": "Arroz, feij√£o, √≥leo, a√ß√∫car, macarr√£o e itens essenciais de higiene. Alimenta uma fam√≠lia de 4 pessoas por 15 dias.",
                    "foto_url": "https://placehold.co/600x400/f5f5f5/cccccc?text=Cesta+Basica",
                    "valor": 89.90,
                    "link_pagamento": "https://www.mercadopago.com.br"
                }
            };

            // --- L√≥gica de UI ---
            const loadingOverlay = document.getElementById('loading-overlay');
            const buyBtn = document.getElementById('btn-buy');
            const legalCheckbox = document.getElementById('legal-agreement');
            let paymentLink = "";

            // 1. Configurar Cores e Dados
            const applyData = () => {
                // Cores
                document.documentElement.style.setProperty('--primary-color', data.config.cor_primaria);
                document.documentElement.style.setProperty('--primary-dark', adjustColorBrightness(data.config.cor_primaria, -20));

                // Textos e Imagens
                document.title = data.evento.titulo_pagina;
                document.getElementById('host-photo').src = data.evento.foto_aniversariante_url;
                document.getElementById('event-title').textContent = data.evento.titulo_principal;
                document.getElementById('event-subtitle').textContent = data.evento.subtitulo;

                document.getElementById('story-title').textContent = data.evento.titulo_historia;
                document.getElementById('story-text').textContent = data.evento.texto_historia;
                document.getElementById('beneficiary-thumb').src = data.beneficiario.foto_url;
                document.getElementById('beneficiary-name').textContent = data.beneficiario.nome;

                // Produto
                document.getElementById('product-img').src = data.produto.foto_url;
                document.getElementById('product-name').textContent = data.produto.nome;
                document.getElementById('product-desc').textContent = data.produto.descricao;
                document.getElementById('product-price').textContent = new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(data.produto.valor);
                paymentLink = data.produto.link_pagamento;

                // Term√¥metro e Anima√ß√£o
                const current = data.meta.cestas_atuais;
                const goal = data.meta.cestas_objetivo;
                const percentage = Math.min((current / goal) * 100, 100);
                
                document.getElementById('cestas-current').textContent = current;
                document.getElementById('cestas-goal').textContent = goal;
                
                // Anima√ß√£o da barra de progresso (delay pequeno para o usu√°rio ver)
                setTimeout(() => {
                    document.getElementById('progress-fill').style.width = percentage + "%";
                }, 500);

                if(percentage >= 100) {
                     document.getElementById('progress-subtext').textContent = "Meta batida! Incr√≠vel! üéâ";
                     document.getElementById('progress-subtext').style.backgroundColor = "#d4edda";
                     document.getElementById('progress-subtext').style.color = "#155724";
                } else {
                     document.getElementById('progress-subtext').textContent = `Faltam apenas ${goal - current} cestas para a meta!`;
                }

                // Remover loading
                setTimeout(() => {
                    loadingOverlay.style.opacity = '0';
                    setTimeout(() => { loadingOverlay.style.display = 'none'; }, 500);
                }, 800);
            };

            // 2. Intera√ß√µes
            legalCheckbox.addEventListener('change', function() {
                if(this.checked) {
                    buyBtn.classList.add('enabled');
                } else {
                    buyBtn.classList.remove('enabled');
                }
            });

            buyBtn.addEventListener('click', function() {
                if (!legalCheckbox.checked) return;
                
                // Efeito visual de clique
                this.innerHTML = "Redirecionando...";
                setTimeout(() => {
                    window.open(paymentLink, '_blank');
                    this.innerHTML = "<span>‚ù§</span> Presentear Cesta";
                }, 1000);
            });

            // Fun√ß√£o auxiliar de cor
            function adjustColorBrightness(color, amount) {
                return '#' + color.replace(/^#/, '').replace(/../g, color => ('0' + Math.min(255, Math.max(0, parseInt(color, 16) + amount)).toString(16)).substr(-2));
            }

            // Iniciar
            applyData();
        });
    </script>
</body>
</html>
